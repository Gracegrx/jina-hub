(this["webpackJsonpdashboard-v1"]=this["webpackJsonpdashboard-v1"]||[]).push([[0],{100:function(e,t,a){"use strict";t.a={pokedex:{name:"Pokedex Query",type:"example",yaml:"!Flow\n    with:\n      read_only: true\n      rest_api: true\n      port_expose: $JINA_PORT\n      board:\n        canvas:\n          gateway:\n            x: 250\n            y: 150\n          chunk_seg:\n            x: 250\n            y: 268\n          tf_encode:\n            x: 250\n            y: 420\n          chunk_idx:\n            x: 250\n            y: 600\n          ranker:\n            x: 250\n            y: 836\n          doc_idx:\n            x: 249\n            y: 985\n    pods:\n      gateway: {}\n      chunk_seg:\n        uses: pods/craft.yml\n        parallel: $PARALLEL\n        needs: gateway\n      tf_encode:\n        uses: pods/encode.yml\n        parallel: $PARALLEL\n        timeout_ready: 600000\n        needs: chunk_seg\n      chunk_idx:\n        uses: pods/chunk.yml\n        shards: $SHARDS\n        separated_workspace: true\n        polling: all\n        uses_reducing: _merge_all\n        timeout_ready: 100000\n        needs: tf_encode\n      ranker:\n        uses: BiMatchRanker\n        needs: chunk_idx\n      doc_idx:\n        uses: pods/doc.yml\n        needs: ranker\n    \n    "},flower:{name:"Flower Search Query",type:"example",yaml:"!Flow\n    with:\n      read_only: true\n      port_expose: $JINA_PORT\n      board:\n        canvas:\n          gateway:\n            x: 250\n            y: 150\n          loader:\n            x: 250\n            y: 257\n          flipper:\n            x: 252\n            y: 407\n          normalizer:\n            x: 239\n            y: 563\n          encoder:\n            x: 252\n            y: 712\n          chunk_indexer:\n            x: 250\n            y: 872\n          ranker:\n            x: 252\n            y: 1066\n          doc_indexer:\n            x: 253\n            y: 1199\n    pods:\n      gateway: {}\n      loader:\n        uses: yaml/craft-load.yml\n        read_only: true\n        needs: gateway\n      flipper:\n        uses: yaml/craft-flip.yml\n        read_only: true\n        needs: loader\n      normalizer:\n        uses: yaml/craft-normalize.yml\n        read_only: true\n        needs: flipper\n      encoder:\n        uses: $ENCODER\n        timeout_ready: 600000\n        read_only: true\n        needs: normalizer\n      chunk_indexer:\n        uses: yaml/index-chunk.yml\n        separated_workspace: true\n        polling: all\n        uses_reducing: _merge_all\n        needs: encoder\n      ranker:\n        uses: MinRanker\n        needs: chunk_indexer\n      doc_indexer:\n        uses: yaml/index-doc.yml\n        needs: ranker  \n    "},southpark:{name:"Southpark Query",type:"example",yaml:"!Flow\n    with:\n      read_only: true\n      port_expose: $JINA_PORT\n      board:\n        canvas:\n          gateway:\n            x: 254\n            y: 147\n          splittor:\n            x: 254\n            y: 270\n          encoder:\n            x: 254\n            y: 448\n          chunk_indexer:\n            x: 251\n            y: 645\n          ranker:\n            x: 255\n            y: 862\n          doc_indexer:\n            x: 256\n            y: 1002\n    pods:\n      gateway: {}\n      splittor:\n        uses: pods/craft-split.yml\n        parallel: $PARALLEL\n        read_only: true\n        needs: gateway\n      encoder:\n        uses: pods/encode.yml\n        parallel: $PARALLEL\n        timeout_ready: 60000\n        read_only: true\n        needs: splittor\n      chunk_indexer:\n        uses: pods/index-chunk.yml\n        shards: $SHARDS\n        separated_workspace: true\n        polling: all\n        reducing_uses: _merge_all\n        needs: encoder\n      ranker:\n        uses: MinRanker\n        needs: chunk_indexer\n      doc_indexer:\n        uses: pods/index-doc.yml\n        needs: ranker\n    "}}},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),o=a(93),c=a(602);function l(e){var t=e.value,a=e.onChange,n=e.placeholder,l=e.variant;return r.a.createElement("div",{className:"expanding-searchbar expanding-searchbar-".concat(l||"default")},r.a.createElement(o.a,null,r.a.createElement(o.a.Prepend,{className:"ml-auto"},r.a.createElement(o.a.Text,null,r.a.createElement("i",{className:"material-icons"},"search"))),r.a.createElement(c.a.Control,{type:"text",placeholder:n,value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement(o.a.Append,null,r.a.createElement(o.a.Text,null,r.a.createElement("i",{className:"cursor-pointer text-muted material-icons mr-3 ".concat(t?"":"d-invisible"),onClick:function(){return a("")}},"cancel")))))}},118:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=function(e,t){var a,n=function(e){return t&&t(e)},o=[],c=Math.floor(e),l=e-c,s=function(){var e=a;o.push(r.a.createElement("i",{key:a,className:"material-icons",onClick:function(){return n(e)}},"star"))};for(a=0;a<c;++a)s();if(l>=.8){var i=a;o.push(r.a.createElement("i",{key:a++,className:"material-icons",onClick:function(){return n(i)}},"star"))}else if(l>=.25){var u=a;o.push(r.a.createElement("i",{key:a++,className:"material-icons",onClick:function(){return n(u)}},"star_half"))}for(var m=function(e){var t=a;o.push(r.a.createElement("i",{key:a++,className:"material-icons",onClick:function(){return n(t)}},"star_outline"))},d=o.length;d<5;++d)m();return o};t.a=function(e){var t=e.rating,a=e.userRated,n=e.rate,c=e.totalRatings,l=o(t,n);return r.a.createElement("div",{className:"d-inline-block app-rating mb-3 ".concat(t?"existing":""," ").concat(a?"userRated":""," text-muted")},r.a.createElement("span",{className:"text-faded"},a?"You Rated: ":""),l,c&&r.a.createElement("span",{className:"rating-num ml-1"},"(",c,")"))}},119:function(e,t,a){"use strict";var n=a(26),r=a(28),o=a(27),c=a(69),l=a(0),s=a.n(l),i=a(4),u=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){var e=window.location.href,t=e.indexOf("code");if(t>0){var a=e.substring(t+5,e.length);window.location="".concat(c.a,"/auth/github/callback?code=").concat(a)}},e.render=function(){return s.a.createElement(i.i,{fluid:!0,className:"main-content-container px-0"},s.a.createElement(i.u,{noGutters:!0,className:"h-100"},s.a.createElement(i.g,{lg:"3",md:"5",className:"auth-form mx-auto"},s.a.createElement(i.d,null,s.a.createElement(i.e,null,s.a.createElement("img",{className:"auth-form__logo d-table mx-auto mb-3",src:"/jina-light.svg",style:{maxWidth:"100px"},alt:"Jina"}),s.a.createElement("h5",{className:"auth-form__title text-center mb-4"},"Log in"),s.a.createElement("a",{href:"".concat(c.a,"/auth/github"),id:"github-button",className:"btn btn-block btn-social btn-github"},s.a.createElement("i",{className:"fab fa-github"})," Sign in with GitHub"))))))},e}return a}(s.a.Component);t.a=u},122:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(22),c=a(26),l=a(28),s=a(27),i=a(0),u=a.n(i),m=a(615),d=a(611),p=a(162),g=a(5),f=a(4);function b(e){var t=e.image.buildHistory;return u.a.createElement(f.d,{className:"readme-container mb-4"},u.a.createElement(f.f,{className:"border-bottom d-flex flex-row"},u.a.createElement("h6",{className:"m-0 d-inline-block"},"Build History")),u.a.createElement(f.e,{className:"p-0 build-history"},t&&t.map((function(e,t){var a=new Date(e.created).toLocaleString(),n=(e.size/1e6).toFixed(2);return u.a.createElement("div",{key:t,className:"user-activity__item pr-3 py-3"},u.a.createElement("div",{className:"user-activity__item__icon mt-2"},u.a.createElement("i",{className:"material-icons"},"build")),u.a.createElement("div",{className:"user-activity__item__content"},u.a.createElement("span",{className:"text-light"},a),u.a.createElement("p",null,"[",e.os,"/",e.architecture,"] ",n," MB")))}))))}var h=a(34);function E(e){var t=e.image;return u.a.createElement(f.d,{className:"readme-container mb-4"},u.a.createElement(f.f,{className:"border-bottom d-flex flex-row"},u.a.createElement("h6",{className:"m-0 d-inline-block"},"Image Details")),u.a.createElement(f.e,{className:"pt-0 pb-2"},u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Name"),u.a.createElement(f.g,null,t.name)),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Version"),u.a.createElement(f.g,null,t.version)),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Author"),u.a.createElement(f.g,null,t.author)),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Description"),u.a.createElement(f.g,null,t.description)),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Documentation"),u.a.createElement(f.g,null,u.a.createElement("a",{href:t.documentation,target:"_blank",rel:"noopener noreferrer"},t.documentation))),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Source"),u.a.createElement(f.g,null,u.a.createElement("a",{href:t.source,target:"_blank",rel:"noopener noreferrer"},t.source))),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"License"),u.a.createElement(f.g,null,t.license)),u.a.createElement(f.u,{className:"border-bottom py-2"},u.a.createElement(f.g,null,"Vendor"),u.a.createElement(f.g,null,t.vendor)),u.a.createElement(f.u,{className:"py-2"},u.a.createElement(f.g,null,"URL"),u.a.createElement(f.g,null,u.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.url)))))}function v(e){var t=e.readme,a=e.documentation;return u.a.createElement(f.d,{className:"readme-container mb-4"},u.a.createElement(f.f,{className:"border-bottom d-flex flex-row"},u.a.createElement("h6",{className:"m-0 d-inline-block"},"README.MD"),u.a.createElement("div",{className:"flex-fill d-inline-block"}),u.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer text-primary"},u.a.createElement("i",{className:"fab fa-github"})," View on GitHub")),u.a.createElement(f.e,null,t?u.a.createElement("div",{className:"markup",dangerouslySetInnerHTML:{__html:t}}):u.a.createElement("h2",{className:"text-muted text-center py-4"},"No Readme Found")))}var y=a(620),w=a(616);function N(e){var t=e.image,a=e.copyCode,n=t.repoTags[t.repoTags.length-1],r=["from jina.flow import Flow\nf = Flow().add(name='my-pod', image='".concat(n,"')"),"from jina.flow import Flow\n# assuming you have a running gateway on 192.168.0.123:45678\nf = Flow().add(name='my-pod', image='".concat(n,"', yaml_path='my.yml')"),"from jina.flow import Flow\n# assuming you have a running gateway on 192.168.0.123:45678\nf = Flow().add(name='my-pod', image='".concat(n,"', host='192.168.0.123', port_grpc=45678)"),'!Flow\npods:\n  my_pod1:\n    image: "'.concat(n,'"'),"jina pod --image ".concat(n),"docker run -p 55555:55555 -p 55556:55556 ".concat(n," --port-in 55555 --port-out 55556"),"docker run -v $(pwd)/my.yml:/my.yml ".concat(n," --yaml-path /my.yml")];return u.a.createElement(f.d,{className:"mb-4"},u.a.createElement(f.f,{className:"p-3 border-bottom d-flex flex-row"},u.a.createElement("h6",{className:"m-0 d-inline-block"},"Usage")),u.a.createElement(f.e,{className:"py-2 px-3 pt-4 code-usage"},u.a.createElement("p",{className:"mb-1"},"Use this image in Flow API"),u.a.createElement(y.a,{language:"python",style:w.a,onClick:function(){return a(r[0])}},r[0]),u.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Flow API and override YAML"),u.a.createElement(y.a,{language:"python",style:w.a,onClick:function(){return a(r[1])}},r[1]),u.a.createElement("p",{className:"mb-1 mt-4"},"Use this image remotely in Flow API"),u.a.createElement(y.a,{language:"python",style:w.a,onClick:function(){return a(r[2])}},r[2]),u.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Flow YAML"),u.a.createElement(y.a,{language:"yaml",style:w.a,onClick:function(){return a(r[3])}},r[3]),u.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Jina CLI"),u.a.createElement(y.a,{language:"bash",style:w.a,onClick:function(){return a(r[4])}},r[4]),u.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Docker CLI"),u.a.createElement(y.a,{language:"bash",style:w.a,onClick:function(){return a(r[5])}},r[5]),u.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Docker CLI and override YAML"),u.a.createElement(y.a,{language:"bash",style:w.a,onClick:function(){return a(r[6])}},r[6])))}var O=a(118);function x(e){var t=e.review;return u.a.createElement(f.d,{className:"readme-container mb-4"},u.a.createElement(f.f,{className:"border-bottom d-flex flex-row"},u.a.createElement("h6",{className:"m-0 d-inline-block"},t.username),u.a.createElement("div",{className:"flex-fill d-inline-block"})),u.a.createElement(f.e,{className:"py-3"},t.content))}function k(e){var t=e.reviews,a=e.newReview;return u.a.createElement("div",null,u.a.createElement("div",{className:"border-bottom d-flex flex-row mb-4"},u.a.createElement("h3",{className:"flex-fill"},"Reviews"),u.a.createElement("div",null,u.a.createElement(f.b,{onClick:a},u.a.createElement("i",{className:"material-icons mr-2"},"add_comment"),"New Review"))),t.length>0?t.map((function(e,t){return u.a.createElement(x,{key:t,review:e})})):u.a.createElement("h2",{className:"text-muted text-center py-4"},"No Reviews"))}var C=a(20),j=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getImageData()},n.componentWillUnmount=function(){g.c.removeListener("update-hub",n.getImageData)},n.getImageData=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.c.getHubImage(n.state.imageId);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:t=e.t0,n.setState({imageData:t,loading:!1});case 7:case"end":return e.stop()}}),e)}))),n.rate=function(e){var t=n.state.imageId;g.b.dispatch({actionType:g.a.POST_RATING,payload:{imageId:t,stars:e}})},n.copyCode=function(e){Object(C.a)(e),g.b.dispatch({actionType:g.a.SHOW_BANNER,payload:["Content copied to clipboard","success"]})},n.newReview=function(){var e=n.state.imageData.id;g.b.dispatch({actionType:g.a.SHOW_MODAL,payload:{modal:"review",modalParams:{imageId:e}}})},n.render=function(){var e,t=n.state,a=t.imageData,r=t.loading,o=a.name,c=a.readmeHTML,l=a.documentation,s=a.totalStars,i=a.totalRatings,g=a.userRated,f=a.reviews;return s&&i&&(e=s/i),u.a.createElement(m.a,{fluid:!0,className:"main-content-container px-0"},r?u.a.createElement("div",{className:"error"},u.a.createElement("div",{className:"loader"})):u.a.createElement("div",{className:"px-4"},u.a.createElement(d.a,{noGutters:!0,className:"page-header mb-4"},u.a.createElement(h.a,{title:o,className:"text-sm-left mb-3"}),u.a.createElement(p.a,{md:"6"}),u.a.createElement(p.a,{md:"3",className:"py-sm-2 text-right"},u.a.createElement("h3",null,u.a.createElement(O.a,{rating:g||e,totalRatings:i,rate:n.rate,userRated:g})))),u.a.createElement(d.a,null,u.a.createElement(p.a,{md:"6"},u.a.createElement(N,{image:a,copyCode:n.copyCode}),u.a.createElement(E,{image:a}),u.a.createElement(b,{image:a})),u.a.createElement(p.a,{md:"6"},u.a.createElement(v,{readme:c,documentation:l}),u.a.createElement(k,{reviews:f,newReview:n.newReview})))))};var l=window.location.hash,s=l.substring(l.indexOf("?"),l.length),i=new URLSearchParams(s).get("id");return n.state={imageId:i,loading:!1,imageData:{reviews:[],repoTags:[]}},g.c.on("update-hub",n.getImageData),n}return a}(u.a.Component);t.a=j},123:function(e,t,a){"use strict";var n=a(26),r=a(28),o=a(27),c=a(0),l=a.n(c),s=a(615),i=a(611),u=a(162),m=a(5),d=a(34),p=a(53),g=a(117),f=a(621),b=a(42),h=a(118);function E(e){var t,a=e.image,n=a.name,r=a.id,o=a.official,c=a.author,s=a.description,m=a.totalStars,d=a.totalRatings;return a.totalStars&&a.totalRatings&&(t=m/d),l.a.createElement(b.b,{className:"unstyled-link",to:"/package?id=".concat(r)},l.a.createElement(f.a,{className:"clickable mb-4 h-100 image-card"},l.a.createElement(f.a.Body,{className:"pb-0 mb-0 pt-3"},l.a.createElement(i.a,null,l.a.createElement(u.a,{xs:"12",className:"px-0"},l.a.createElement("div",{className:"app-category mb-2"},"search"),l.a.createElement("div",{className:"app-title mb-2"},n),l.a.createElement("div",{className:"app-subtitle mb-2"},c)),l.a.createElement(u.a,{sm:"12",className:"px-0 pb-0"},l.a.createElement("div",{className:"description-container"},l.a.createElement("div",{className:"description-overlay"}),l.a.createElement("div",{className:"app-description"},s))))),l.a.createElement(f.a.Footer,{className:"pt-0 px-3 pb-3"},d?l.a.createElement(h.a,{rating:t,totalRatings:d}):l.a.createElement("span",{className:"text-muted"},"no ratings"),o&&l.a.createElement("span",{className:"float-right"},l.a.createElement("img",{src:"/jina-j.png",alt:"Official Package",width:30})))))}var v=[{value:"all",label:"All Categories"},{value:"search",label:"Search"},{value:"configurations",label:"Configurations"}],y=[{value:"suggested",label:"Suggested"},{value:"highestRating",label:"Highest Rated"},{value:"newest",label:"Newest"}],w=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).componentWillUnmount=function(){m.c.removeListener("update-hub",r.getHubImages)},r.getHubImages=function(){var e=m.c.getHubImages();r.setState({images:e})},r.sortBy=function(e){r.setState({sortType:e},r.search)},r.setCategory=function(e){r.setState({category:e},r.search)},r.updateSearch=function(e){r.setState({searchQuery:e},r.search)},r.search=function(){var e=r.state,t=e.category,a=e.searchQuery,n=e.sortType;m.b.dispatch({actionType:m.a.SEARCH_HUB,payload:{category:t,q:a,sort:n}})},r.render=function(){var e=r.state,t=e.images,a=e.searchQuery;return l.a.createElement(s.a,{fluid:!0,className:"main-content-container px-0"},l.a.createElement("div",{className:"px-4"},l.a.createElement(i.a,{className:"page-header"},l.a.createElement(d.a,{title:"Jina Hub",className:"text-sm-left mb-3"})),l.a.createElement(i.a,{className:"mb-4"},l.a.createElement(u.a,{md:"8"},l.a.createElement(p.a,{options:v,onFilterChange:function(e){return r.setCategory(e[0].value)},className:"hub-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:"All Categories",isSearchable:!1}),l.a.createElement(p.a,{options:y,onFilterChange:function(e){return r.sortBy(e[0].value)},className:"hub-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:"Suggested",isSearchable:!1})),l.a.createElement(u.a,{md:"4"},l.a.createElement(g.a,{variant:"gray",placeholder:"search hub...",value:a,onChange:r.updateSearch}))),l.a.createElement(i.a,null,Object.keys(t).map((function(e){return l.a.createElement(u.a,{key:e,md:"3",className:"mb-4"},l.a.createElement(E,{image:t[e]}))})))))},r.state={images:m.c.getHubImages(),sortType:"suggested",category:"all",searchQuery:""},m.c.on("update-hub",r.getHubImages),r}return a}(l.a.Component);t.a=w},142:function(e){e.exports=JSON.parse('[{"name":"uses","type":"str"},{"name":"replicas","type":"int"},{"name":"read_only","type":"bool"},{"name":"separated_workspace","type":"bool"},{"name":"host","type":"str"},{"name":"port_grpc","type":"int"},{"name":"identity","type":"str"},{"name":"image","type":"str"},{"name":"entrypoint","type":"str"},{"name":"pull_latest","type":"bool"},{"name":"volumes","type":"str"},{"name":"port_in","type":"int"},{"name":"port_out","type":"int"},{"name":"host_in","type":"str"},{"name":"host_out","type":"str"},{"name":"socket_in","type":"SocketType"},{"name":"socket_out","type":"SocketType"},{"name":"port_ctrl","type":"int"},{"name":"ctrl_with_ipc","type":"bool"},{"name":"timeout","type":"int"},{"name":"timeout_ctrl","type":"int"},{"name":"timeout_ready","type":"int"},{"name":"dump_interval","type":"int"},{"name":"exit_no_dump","type":"bool"},{"name":"replica_id","type":"int"},{"name":"check_version","type":"bool"},{"name":"array_in_pb","type":"bool"},{"name":"num_part","type":"int"},{"name":"memory_hwm","type":"int"},{"name":"runtime","type":"str"},{"name":"max_idle_time","type":"int"},{"name":"log_sse","type":"bool"},{"name":"log_remote","type":"bool"},{"name":"log_profile","type":"bool"},{"name":"max_message_size","type":"int"},{"name":"proxy","type":"bool"},{"name":"replica_type","type":"ReplicaType"},{"name":"shutdown_idle","type":"bool"}]')},167:function(e,t,a){},168:function(e,t,a){},17:function(e,t,a){"use strict";var n=a(39),r=a(79);function o(e,t,a){l.log("window.onerror - ERROR",e,t,"line: ".concat(a))}function c(e){window.logs.push(e)}var l={log:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];if(window.logsEnabled){var o=Object(n.a)(arguments);(e=console).log.apply(e,Object(n.a)(o)),c(o)}},isEnabled:function(){return window.logsEnabled},enable:function(){var e={};for(var t in window.navigator)e[t]=window.navigator[t];window.logs=[],c(e),window.addEventListener("error",o),window.logsEnabled=!0},disable:function(){window.removeEventListener("error",o),window.logsEnabled=!1},setFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";window.logsFormat=e},exportLogs:function(){for(var e=window.logsFormat||"json",t=window.logs,a="[\n",n=0;n<t.length;++n){var o=t[n];a+=JSON.stringify(o)+"".concat(n<t.length-1?",":"","\n")}a+="]";var c="jina-dashboard-debug-output-".concat(new Date,".").concat(e),l=new Blob([a],{type:"text,plain;charset=utf-8"});Object(r.saveAs)(l,c)}};t.a=l},20:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"i",(function(){return c})),a.d(t,"h",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return v})),a.d(t,"e",(function(){return E})),a.d(t,"b",(function(){return h})),a.d(t,"f",(function(){return b})),a.d(t,"a",(function(){return y}));var n=function(e){return new Blob([e],{type:"text,plain;charset=utf-8"})},r=function(e){return n(function(e){return e.reduce((function(e,t){return e+"".concat(t.created,',"').concat(t.formattedTimestamp,'",').concat(t.name,",").concat(t.process,",").concat(t.levelname,',"').concat(t.msg,'",').concat(t.filename,",").concat(t.lineno,",").concat(t.module,",").concat(t.funcName,",").concat(t.pathname,"\n")}),"created,formatted timestamp,name,process,level name,message,filename,line number,module,funcname,pathname\n")}(e))},o=function(e){return n(function(e){var t=e.reduce((function(t,a,n){return t+(JSON.stringify(a)+"".concat(n<e.length-1?",":"","\n"))}),"\n");return"[".concat(t,"]")}(e))},c=function(e){return n(function(e){return e.reduce((function(e,t){return e+"".concat(t.formattedTimestamp," ").concat(t.name,"@").concat(t.process," [").concat(t.levelname,"]: ").concat(t.msg,"\n")}),"")}(e))},l=a(12),s=a(238),i=function(e,t){var a={offset:{x:0,y:0},nodes:{},links:{},selected:{},hovered:{},scale:1,with:{}},n={},r={},o=!1;if(!e.gateway){var c;c=Object(l.a)({gateway:null},e),e=c}Object.keys(e).forEach((function(a){var c=e[a]||{},s={id:a,label:a,ports:{},needs:{},send_to:{},position:{},properties:Object(l.a)({},c)};if(s.properties.needs&&delete s.properties.needs,s.ports.inPort={id:"inPort",type:"input"},s.ports.outPort={id:"outPort",type:"output"},o&&!c.needs&&"gateway"!==a&&(c.needs=o),c.needs)for(var i=Array.isArray(c.needs)?c.needs:[c.needs],u=0;u<i.length;++u){var m=i[u];s.needs[m]=!0;var d="".concat(m,"-to-").concat(a),p={color:"red",id:d,from:{nodeId:m,portId:"outPort"},to:{nodeId:a,portId:"inPort"}};r[d]=p}if(t&&t[a]){var g=t[a],f=g.x,b=g.y;s.position={x:parseInt(f),y:parseInt(b)}}n[a]=s,o=a}));var i={},m=s.nodeOffset.x,d=s.nodeOffset.y;return Object.keys(n).forEach((function(e){var t=u(n,e,0);n[e].depth=t,i[t]>=0?i[t]++:i[t]=0,n[e].position.x||(n[e].position={y:t*d+d,x:i[t]*m+m})})),a.nodes=n,a.links=r,a};function u(e,t,a){for(var n=Object.keys(e[t].needs),r=0,o=0;o<n.length;++o){var c=n[o],l=void 0;(l=e[c].depth?e[c].depth+1:u(e,c,1))>r&&(r=l)}return a+r}var m=a(14),d=a(60),p=a(152),g=a(142),f={};g.forEach((function(e){return f[e.name]=e.type}));var b=function(e){var t=/^!/.test(e)?e.split("\n").slice(1).join("\n"):e;try{return{data:p.parse(t)}}catch(a){return alert("Error Parsing YAML:\n"+a),{error:a}}},h=function(e){var t=e.with,a=e.nodes,n=e.links,r=Object.values(n).reduce((function(e,t){var n=function(e,t){var a,n=e.from,r=e.to;return a={},Object(d.a)(a,n.portId,t[n.nodeId].label||t[n.nodeId].properties.name),Object(d.a)(a,r.portId,t[r.nodeId].label||t[r.nodeId].properties.name),a}(t,a),r=n.outPort,o=n.inPort;return e[o]||(e[o]=[]),e[o].push(r),e}),{}),o=Object.values(a).reduce((function(e,t){var a=t.label;if(!a)return e;var n,o=Object.entries(t.properties).reduce((function(e,t){var a=Object(m.a)(t,2),n=a[0],r=a[1];return e[n]=function(e,t){return"bool"===f[e]?"true"===t:t}(n,r),e}),{});return r[a]&&(o.needs=(n=r[a],Array.isArray(n)&&1===n.length?n[0]:n)),e[a]=Object(l.a)({},o),e}),{}),c=Object.values(a).reduce((function(e,t){var a=t.position,n=a.x,r=a.y;return e[t.label]={x:n,y:r},e}),{}),s={with:Object(l.a)(Object(l.a)({},t),{},{board:{canvas:c}}),pods:o};return"!Flow\n".concat(p.stringify(s))},E=function(e){var t=60,a=3600;return e<t?"".concat(Math.floor(e),"s"):e<a?"".concat(Math.floor(e/t),"m ").concat(Math.floor(e%t),"s"):"".concat(Math.floor(e/a),"h ").concat(Math.floor(e%a/t),"m ").concat(Math.floor(e%t),"s")},v=function(e){return e<1024?"".concat(e," Bytes"):e<Math.pow(1024,2)?"".concat((e/1024).toFixed(1)," KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(1)," MB"):"".concat((e/Math.pow(1024,3)).toFixed(1)," GB")},y=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},215:function(e){e.exports=JSON.parse('[{"name":"reader","yaml_path":"pods/extract.yml"},{"name":"loader","yaml_path":"yaml/craft-load.yml","replicas":3,"read_only":"true"},{"name":"splittor","yaml_path":"pods/craft-split.yml","replicas":3,"read_only":"true"},{"name":"encoder","yaml_path":"pods/encode.yml","replicas":3,"timeout_ready":1200000,"read_only":"true"},{"name":"chunk_indexer","yaml_path":"pods/index-chunk.yml","replicas":3,"separated_workspace":"true"},{"name":"doc_indexer","yaml_path":"pods/index-doc.yml"},{"name":"join_all","yaml_path":"_merge","read_only":"true"},{"name":"ranker","yaml_path":"MinRanker"},{"name":"flipper","yaml_path":"yaml/craft-flip.yml","replicas":3,"read_only":"true"},{"name":"normalizer","yaml_path":"yaml/craft-normalize.yml","replicas":3,"read_only":"true"},{"name":"crafter","yaml_path":"pods/craft.yml","read_only":"true"},{"name":"chunk_seg","yaml_path":"pods/craft.yml","replicas":3}]')},238:function(e,t,a){"use strict";a.r(t),a.d(t,"nodeOffset",(function(){return n}));var n={x:250,y:150}},322:function(e,t,a){"use strict";a.r(t),a.d(t,"Dispatcher",(function(){return n}));var n=new(0,a(323).Dispatcher)},33:function(e,t,a){"use strict";a.d(t,"b",(function(){return V})),a.d(t,"a",(function(){return Y}));var n=a(26),r=a(28),o=a(27),c=a(0),l=a.n(c),s=a(4),i=a(14);function u(){return l.a.createElement("div",{className:"main-navbar__search w-100 d-none d-md-flex d-lg-flex"})}function m(e){var t=e.toggleSidebar;return l.a.createElement("nav",{className:"nav cursor-pointer"},l.a.createElement("span",{onClick:t,className:"nav-link nav-link-icon toggle-sidebar d-sm-inline d-md-inline d-lg-none text-center"},l.a.createElement("i",{className:"material-icons"},"\ue5d2")))}function d(e){var t=e.connected,a=e.reconnect;return l.a.createElement(s.q,{className:"dropdown notifications",onClick:a},l.a.createElement(s.r,{className:"nav-link-icon text-center"},l.a.createElement("div",{className:"nav-link-icon__wrapper"},l.a.createElement("i",{className:"material-icons"},"language"),t?l.a.createElement(s.a,{pill:!0,theme:"success",className:"connection-indicator p-1"},l.a.createElement("i",{className:"material-icons"},"done")):l.a.createElement(s.a,{pill:!0,theme:"danger",className:"connection-indicator p-1"},l.a.createElement("i",{className:"material-icons"},"close")))))}var p=a(42);function g(e){var t=e.user,a=e.logOut,n=e.userActionsVisible,r=e.toggleUserActions;return l.a.createElement(s.q,{tag:s.j,caret:!0,toggle:r},t?l.a.createElement(s.m,{caret:!0,tag:s.r,className:"text-nowrap px-3"},l.a.createElement("img",{className:"user-avatar rounded-circle mr-2",src:t._json.avatar_url,alt:"User Avatar"})," ",l.a.createElement("span",{className:"d-none d-md-inline-block"},t.username)):l.a.createElement(p.b,{to:"/login",className:"nav-link px-3"},l.a.createElement(s.b,{className:"text-nowrap mb-0 mt-1"},"Log in")),l.a.createElement(s.h,{tag:s.l,right:!0,small:!0,open:n},l.a.createElement(s.k,{tag:p.b,to:"/",className:"text-danger",onClick:a},l.a.createElement("i",{className:"material-icons text-danger"},"\ue879")," Logout")))}function f(){return l.a.createElement(s.t,{href:"#",style:{lineHeight:"25px"}},l.a.createElement("div",{className:"d-table m-auto"},l.a.createElement("img",{id:"main-logo",className:"d-inline-block align-top mr-1 ml-3",style:{maxWidth:"25px"},src:"/icon.png",alt:"Jina"})))}function b(e){var t=e.usesAuth,a=e.usesConnection,n=e.logOut,r=e.toggleSidebar,o=e.reconnect,p=e.connected,b=e.user,h=e.hideSidebarToggle,E=e.showLogo,v=Object(c.useState)(!1),y=Object(i.a)(v,2),w=y[0],N=y[1];return l.a.createElement("div",{className:"main-navbar"},l.a.createElement(s.i,{fluid:!0,className:"p-0"},l.a.createElement(s.s,{type:"light",className:"align-items-stretch flex-md-nowrap p-0 px-2"},E&&l.a.createElement(f,null),l.a.createElement(u,null),l.a.createElement(s.p,{navbar:!0,className:"flex-row"},a&&l.a.createElement(d,{reconnect:o,connected:p}),t&&l.a.createElement(g,{user:b,userActionsVisible:w,toggleUserActions:function(){N((function(e){return!e}))},logOut:n})),!h&&l.a.createElement(m,{toggleSidebar:r}))))}var h=a(3),E=a.n(h),v=function(e){var t=e.toggleSidebar;return l.a.createElement("div",{className:"main-navbar"},l.a.createElement(s.s,{className:"align-items-stretch bg-white flex-md-nowrap p-0",type:"light"},l.a.createElement(s.t,{className:"w-100 mr-0",href:"#",style:{lineHeight:"25px"}},l.a.createElement("div",{className:"d-table m-auto"},l.a.createElement("img",{id:"main-logo",className:"d-inline-block align-top",style:{maxWidth:"50px"},src:"/jina-light.svg",alt:"Jina Dashboard"}))),l.a.createElement("span",{className:"toggle-sidebar d-sm-inline d-md-none d-lg-none",onClick:t},l.a.createElement("i",{className:"material-icons"},"\ue5c4"))))},y=a(23),w=function(e){var t,a,n=e.item,r=e.toggleSidebar,o=n.items&&n.items.length,c=null===(t=Object(y.f)())||void 0===t||null===(a=t.pathname)||void 0===a?void 0:a.substring(1),i=!1;return n.matches.forEach((function(e){c===e&&(i=!0)})),l.a.createElement(s.q,{style:{position:"relative"}},l.a.createElement(s.r,{className:o&&"dropdown-toggle",tag:o?"a":p.c,to:o?"#":n.to,active:i,onClick:r},n.iconName&&l.a.createElement("div",{className:"d-inline-block item-icon-wrapper"},l.a.createElement("i",{className:"material-icons"},n.iconName)),n.title&&l.a.createElement("span",null,n.title)),n.items&&l.a.createElement(s.h,{tag:s.l,small:!0,open:n.open,style:{top:0}},n.items.map((function(e,t){return l.a.createElement(s.k,{key:t,tag:p.c,to:e.to},e.title)}))))},N=function(e){var t=e.navItems,a=e.toggleSidebar;return l.a.createElement("div",{className:"nav-wrapper"},t.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("h6",{className:"main-sidebar__nav-title"},e.title),"undefined"!==typeof e.items&&e.items.length&&l.a.createElement(s.p,{className:"nav--no-borders flex-column"},e.items.map((function(e,t){return l.a.createElement(w,{key:t,item:e,toggleSidebar:a})}))))})))};var O=function(e){var t=e.menuVisible,a=e.sidebarNavItems,n=e.toggleSidebar,r=E()("main-sidebar","px-0","col-12",t&&"open");return l.a.createElement(s.g,{tag:"aside",className:r,lg:{size:2},md:{size:3}},l.a.createElement(v,{toggleSidebar:n}),l.a.createElement(N,{navItems:a,toggleSidebar:n}))},x=function(e){var t=e.menuItems,a=e.copyright,n=e.loggerEnabled,r=e.enableLogger,o=e.disableLogger,c=e.exportLogs;return l.a.createElement("footer",{className:"main-footer d-flex p-2 px-3"},l.a.createElement(s.i,{fluid:!0},l.a.createElement(s.u,null,l.a.createElement(s.p,null,t.map((function(e,t){return l.a.createElement("a",{key:t,href:e.to,className:"nav-link"},e.title)})),n?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"nav-link text-warning cursor-pointer",onClick:o},"Exit Debug Mode"),l.a.createElement("span",{className:"nav-link text-warning cursor-pointer",onClick:c},"Export Debug Data")):l.a.createElement("span",{className:"nav-link text-warning cursor-pointer",onClick:r},"Debug Mode")),l.a.createElement("span",{className:"copyright ml-auto my-auto mr-2"},a))))};x.defaultProps={contained:!1,copyright:"Copyright \xa9 Jina AI Limited",menuItems:[{title:"Home",to:"https://jina.ai"},{title:"Open Source",to:"https://opensource.jina.ai"},{title:"Learn",to:"https://docs.jina.ai"},{title:"Community",to:"https://twitter.com/JinaAI_"},{title:"Jobs",to:"https://www.linkedin.com/company/jinaai/jobs/"},{title:"Privacy & Terms",to:"https://github.com/jina-ai/legal"}]};var k=x,C=a(209);function j(e){var t=e.acceptCookies;return l.a.createElement("div",{className:"cookies-banner"},l.a.createElement("p",{className:"mb-2"},'We and third parties use cookies or similar technologies ("Cookies") as described below to collect and process personal data, such as your IP address or browser information. You can learn more about how this site uses Cookies by reading our privacy policy linked below. By clicking "I consent to cookies", you accept the placement and use of these Cookies for these purposes. You can change your mind and revisit your preferences at any time by accessing the \u201cCookie Preferences\u201d link in the footer of this site.'),l.a.createElement(C.a,{className:"ml-auto d-block",onClick:t},"I consent to cookies"))}var _=a(619);function S(e){var t=e.data;if(!t)return null;var a,n="success"===(a=t.theme)?l.a.createElement("i",{className:"material-icons mr-1"},"check_circle_outline"):"error"===a?l.a.createElement("i",{className:"material-icons mr-1"},"cerror_outline"):l.a.createElement("i",{className:"material-icons mr-1"},"warning");return l.a.createElement("div",{className:"notifications-container"},l.a.createElement(_.a,{className:"toast-".concat(t.theme," text-white")},l.a.createElement(_.a.Header,{className:"text-white",closeButton:!1},l.a.createElement("strong",{className:"mr-auto"},n,l.a.createElement("span",{className:"text-uppercase"},t.theme))),l.a.createElement(_.a.Body,{className:"text-white"},t.message)))}var L=a(611),A=a(162);function T(e){var t=e.reconnect;return l.a.createElement("div",{className:"notifications-container"},l.a.createElement(_.a,{className:"bg-warning"},l.a.createElement(_.a.Header,{className:"bg-warning text-white",closeButton:!1},l.a.createElement("strong",{className:"mr-auto"},l.a.createElement("i",{className:"material-icons mr-1"},"warning"),"Could not connect to Jina instance")),l.a.createElement(_.a.Body,{className:"text-white"},l.a.createElement(L.a,null,l.a.createElement(A.a,{xs:"6",className:"pr-2"},l.a.createElement("a",{href:"https://github.com/jina-ai/dashboard#getting-started",target:"_blank",rel:"noopener noreferrer",className:"mr-2"},l.a.createElement(C.a,{variant:"light",className:"w-100"},l.a.createElement("i",{className:"material-icons mr-1"},"text_snippet"),"View Docs"))),l.a.createElement(A.a,{xs:"6",className:"pl-2"},l.a.createElement(C.a,{variant:"primary",className:"w-100",onClick:t},l.a.createElement("i",{className:"material-icons mr-1"},"refresh"),"Refresh"))))))}var F=a(602),I=a(75),D=a.n(I),R={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},M=function(e){var t,a=e.open,n=e.closeModal,r=e.importYAML;return l.a.createElement(D.a,{ariaHideApp:!1,isOpen:a,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:R,onRequestClose:n,closeTimeoutMS:100},l.a.createElement("div",{className:"modal-header p-0"},l.a.createElement("h4",null,l.a.createElement("b",null,"Import YAML")),l.a.createElement("h4",null,l.a.createElement("span",{className:"float-right close-icon"},l.a.createElement("i",{className:"material-icons",onClick:n},"close")))),l.a.createElement("div",{className:"modal-body px-0 pb-0"},l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Label,null,"Custom YAML:"),l.a.createElement(F.a.Control,{placeholder:"Paste Here",ref:function(e){return t=e},as:"textarea",rows:10}))),l.a.createElement(C.a,{className:"btn-primary",onClick:function(){return r(t.value)}},"Continue"))},P={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},W=function(e){var t,a=e.open,n=e.closeModal,r=e.submitReview;return l.a.createElement(D.a,{ariaHideApp:!1,isOpen:a,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:P,onRequestClose:n,closeTimeoutMS:100},l.a.createElement("div",{className:"modal-header p-0"},l.a.createElement("h4",null,l.a.createElement("b",null,"Write a Review")),l.a.createElement("h4",null,l.a.createElement("span",{className:"float-right close-icon"},l.a.createElement("i",{className:"material-icons",onClick:n},"close")))),l.a.createElement("div",{className:"modal-body px-0 pb-0"},l.a.createElement(F.a.Group,null,l.a.createElement(F.a.Control,{placeholder:"Tell the world about your experience",ref:function(e){return t=e},as:"textarea",rows:10}))),l.a.createElement(C.a,{className:"btn-primary",onClick:function(){return r(t.value)}},"Submit"))},H={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},B=["msg","unixTime"],U=function(e){var t=e.open,a=e.closeModal,n=e.modalParams.log||{};return l.a.createElement(D.a,{ariaHideApp:!1,isOpen:t,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:H,onRequestClose:a,closeTimeoutMS:100},l.a.createElement("div",{className:"modal-header p-0"},l.a.createElement("h4",null,l.a.createElement("b",null,"Log Details")),l.a.createElement("h4",null,l.a.createElement("span",{className:"float-right close-icon"},l.a.createElement("i",{className:"material-icons",onClick:a},"close")))),l.a.createElement("div",{className:"modal-body px-0 pb-0 pt-1"},l.a.createElement(L.a,{className:"px-3"},l.a.createElement(A.a,{xs:"3",className:"border-bottom pb-1 px-0"},l.a.createElement("span",{className:"text-bold"},"msg")),l.a.createElement(A.a,{xs:"9",className:"border-bottom pb-1 px-0"},n.msg)),Object.entries(n).filter((function(e){var t=Object(i.a)(e,2),a=t[0];t[1];return!B.includes(a)})).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return"msg"===a?"":l.a.createElement(L.a,{className:"px-3",key:a},l.a.createElement(A.a,{xs:"3",className:"border-bottom pb-1 px-0"},l.a.createElement("span",{className:"text-bold"},a)),l.a.createElement(A.a,{xs:"9",className:"border-bottom pb-1 px-0"},JSON.stringify(n)))}))))},G=a(17),J=a(5),V=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).componentWillUnmount=function(){J.c.removeListener("update-ui",r.getData),J.c.removeListener("update-user",r.getUser)},r.getData=function(){var e=J.c.getModal(),t=J.c.getModalParams(),a=J.c.isLoading(),n=J.c.getBanner(),o=J.c.getConnectionStatus(),c=G.a.isEnabled(),l=J.c.getMenuState(),s=J.c.getSidebarItems();r.setState({modal:e,loading:a,banner:n,connected:o,modalParams:t,loggerEnabled:c,menuVisible:l,sidebarNavItems:s})},r.getUser=function(){var e=J.c.getUser();r.setState({user:e})},r.acceptCookies=function(){localStorage.setItem("accepted-cookies",String(!0)),r.setState({acceptedCookies:!0})},r.closeModal=function(){J.b.dispatch({actionType:J.a.CLOSE_MODAL})},r.importYAML=function(e){J.b.dispatch({actionType:J.a.IMPORT_CUSTOM_YAML,payload:e})},r.submitReview=function(e){var t=r.state.modalParams.imageId;J.b.dispatch({actionType:J.a.POST_REVIEW,payload:{content:e,imageId:t}})},r.reconnect=function(){J.b.dispatch({actionType:J.a.RECONNECT})},r.logOut=function(){J.b.dispatch({actionType:J.a.LOG_OUT})},r.toggleSidebar=function(){J.b.dispatch({actionType:J.a.TOGGLE_SIDEBAR})},r.enableLogger=function(){G.a.enable();var e=J.c.getStoreCopy();G.a.log("Store Snapshot",e),J.b.dispatch({actionType:J.a.SHOW_BANNER,payload:['Debug Mode Enabled. Click "Export Debug Data" to download Debug JSON.',"warning"]})},r.disableLogger=function(){G.a.disable(),J.b.dispatch({actionType:J.a.SHOW_BANNER,payload:["Debug Mode Disabled.","warning"]})},r.exportLogs=function(){var e=J.c.getStoreCopy();G.a.log("Store Snapshot",e),G.a.exportLogs()},r.render=function(){var e=r.state,t=e.modal,a=e.acceptedCookies,n=e.banner,o=e.connected,c=e.user,i=e.loading,u=e.modalParams,m=e.loggerEnabled,d=e.menuVisible,p=e.sidebarNavItems,g=r.props,f=g.children,h=g.usesAuth,E=g.usesConnection;return l.a.createElement(s.i,{fluid:!0,className:"icon-sidebar-nav"},l.a.createElement(s.u,null,l.a.createElement(O,{sidebarNavItems:p,menuVisible:d,toggleSidebar:r.toggleSidebar}),l.a.createElement(s.g,{className:"main-content col",tag:"main"},l.a.createElement(b,{usesAuth:h,usesConnection:E,logOut:r.logOut,toggleSidebar:r.toggleSidebar,reconnect:r.reconnect,connected:o,user:c}),l.a.createElement(S,{data:n}),E&&!i&&!o&&l.a.createElement(T,{reconnect:r.reconnect}),f,!a&&l.a.createElement(j,{acceptCookies:r.acceptCookies}),l.a.createElement(k,{loggerEnabled:m,enableLogger:r.enableLogger,disableLogger:r.disableLogger,exportLogs:r.exportLogs}))),l.a.createElement(U,{open:"logDetails"===t,closeModal:r.closeModal,modalParams:u}),l.a.createElement(M,{open:"import"===t,closeModal:r.closeModal,importYAML:r.importYAML}),l.a.createElement(W,{open:"review"===t,closeModal:r.closeModal,submitReview:r.submitReview}))},r.state={loggerEnabled:G.a.isEnabled(),modal:J.c.getModal(),modalParams:J.c.getModalParams(),loading:J.c.isLoading(),user:J.c.getUser(),banner:J.c.getBanner(),connected:J.c.getConnectionStatus(),menuVisible:J.c.getMenuState(),sidebarNavItems:J.c.getSidebarItems(),acceptedCookies:localStorage.getItem("accepted-cookies")},J.c.on("update-ui",r.getData),J.c.on("update-user",r.getUser),r}return a}(l.a.Component),Y=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).componentWillUnmount=function(){J.c.removeListener("update-ui",r.getData),J.c.removeListener("update-user",r.getUser)},r.getData=function(){var e=J.c.getModal(),t=J.c.getModalParams(),a=J.c.isLoading(),n=J.c.getBanner(),o=G.a.isEnabled();r.setState({modal:e,loading:a,banner:n,modalParams:t,loggerEnabled:o})},r.getUser=function(){var e=J.c.getUser();r.setState({user:e})},r.acceptCookies=function(){localStorage.setItem("accepted-cookies",String(!0)),r.setState({acceptedCookies:!0})},r.closeModal=function(){J.b.dispatch({actionType:J.a.CLOSE_MODAL})},r.submitReview=function(e){var t=r.state.modalParams.imageId;J.b.dispatch({actionType:J.a.POST_REVIEW,payload:{content:e,imageId:t}})},r.logOut=function(){J.b.dispatch({actionType:J.a.LOG_OUT})},r.enableLogger=function(){G.a.enable();var e=J.c.getStoreCopy();G.a.log("Store Snapshot",e),J.b.dispatch({actionType:J.a.SHOW_BANNER,payload:['Debug Mode Enabled. Click "Export Debug Data" to download Debug JSON.',"warning"]})},r.disableLogger=function(){G.a.disable(),J.b.dispatch({actionType:J.a.SHOW_BANNER,payload:["Debug Mode Disabled.","warning"]})},r.exportLogs=function(){var e=J.c.getStoreCopy();G.a.log("Store Snapshot",e),G.a.exportLogs()},r.render=function(){var e=r.state,t=e.modal,a=e.acceptedCookies,n=e.banner,o=e.user,c=e.loggerEnabled,i=r.props,u=i.children,m=i.usesAuth,d=i.usesConnection;return l.a.createElement(s.i,null,l.a.createElement(s.u,null,l.a.createElement(s.g,{className:"main-content col",tag:"main"},l.a.createElement(b,{usesAuth:m,usesConnection:d,logOut:r.logOut,hideSidebarToggle:!0,showLogo:!0,user:o}),l.a.createElement(S,{data:n}),u,!a&&l.a.createElement(j,{acceptCookies:r.acceptCookies}),l.a.createElement(k,{loggerEnabled:c,enableLogger:r.enableLogger,disableLogger:r.disableLogger,exportLogs:r.exportLogs}))),l.a.createElement(W,{open:"review"===t,closeModal:r.closeModal,submitReview:r.submitReview}))},r.state={loggerEnabled:G.a.isEnabled(),modal:J.c.getModal(),modalParams:J.c.getModalParams(),loading:J.c.isLoading(),user:J.c.getUser(),banner:J.c.getBanner(),acceptedCookies:localStorage.getItem("accepted-cookies")},J.c.on("update-ui",r.getData),J.c.on("update-user",r.getUser),r}return a}(l.a.Component)},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),o=a(3),c=a.n(o),l=a(162);function s(e){var t=e.title,a=e.subtitle,n=e.className,o=c()(n,"text-center","text-md-left","mb-sm-0");return r.a.createElement(l.a,{xs:"12",sm:"3",className:o},r.a.createElement("h3",{className:"page-title","data-name":"title"},t),r.a.createElement("p",{className:"page-subtitle mt-2 mb-0"},a))}},344:function(e,t,a){"use strict";a.r(t),a.d(t,"Constants",(function(){return n}));var n={TOGGLE_SIDEBAR:"TOGGLE_SIDEBAR",SET_CURRENT_TAB:"SET_CURRENT_TAB",SELECT_NODE:"SELECT_NODE",IMPORT_CUSTOM_YAML:"IMPORT_CUSTOM_YAML",SHOW_MODAL:"SHOW_MODAL",CLOSE_MODAL:"CLOSE_MODAL",SHOW_LOG_AT_INDEX:"SHOW_LOG_AT_INDEX",SAVE_SETTINGS:"SAVE_SETTINGS",RECONNECT:"RECONNECT",POST_REVIEW:"POST_REVIEW",POST_RATING:"POST_RATING",LOG_OUT:"LOG_OUT",SEARCH_HUB:"SEARCH_HUB",SHOW_BANNER:"SHOW_BANNER",LOAD_FLOW:"LOAD_FLOW",SHOW_POD_IN_FLOW:"SHOW_POD_IN_FLOW",CREATE_NEW_FLOW:"CREATE_NEW_FLOW",UPDATE_FLOW:"UPDATE_FLOW",DUPLICATE_FLOW:"DUPLICATE_FLOW",DELETE_FLOW:"DELETE_FLOW"}},345:function(e,t,a){"use strict";a.r(t),a.d(t,"transformLog",(function(){return c}));var n=a(12),r=a(601),o=a(78);function c(e,t){var a=e.created,c=Object(r.a)(a),l=Object(o.a)(),s=Math.floor(a),i=new Date(1e3*s),u=i.toLocaleString();return Object(n.a)(Object(n.a)({},e),{},{createdDate:c,id:l,idx:t,unixTime:s,timestamp:i,formattedTimestamp:u})}},35:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return s}));var n="LOAD_FLOW",r="CREATE_NEW_FLOW",o="UPDATE_FLOW",c="DUPLICATE_FLOW",l="DELETE_FLOW",s={selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}}},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return c}));var n=a(322).Dispatcher,r=a(598).Store,o=a(344).Constants,c=a(345).transformLog},53:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(229),r=a(12),o=a(0),c=a.n(o),l=a(225),s={dropdownIndicator:function(e){return Object(r.a)(Object(r.a)({},e),{},{color:"black"})},indicatorSeparator:function(e){return Object(r.a)(Object(r.a)({},e),{},{opacity:"0"})},container:function(e,t){var a=t.selectProps.width;return Object(r.a)(Object(r.a)({},e),{},{width:a})},option:function(e){return Object(r.a)(Object(r.a)({},e),{},{cursor:"pointer"})},control:function(e){return Object(r.a)(Object(r.a)({},e),{},{cursor:"pointer",border:"none",background:"#F6F8FA"})}};function i(e){var t=e.isMulti,a=e.isSearchable,r=e.clearAfter,o=e.onFilterChange,i=e.options,u=Object(n.a)(e,["isMulti","isSearchable","clearAfter","onFilterChange","options"]),m=r?null:void 0;return c.a.createElement(l.a,Object.assign({onChange:function(e){o(Array.isArray(e)?e:e?[e]:[])},value:m,isMulti:t,options:i,styles:s,readOnly:!0,isSearchable:a},u))}},591:function(e,t,a){"use strict";a.r(t),a.d(t,"hubRoutes",(function(){return m}));var n=a(0),r=a.n(n),o=a(23),c=a(33),l=a(123),s=a(122),i=a(119),u=a(92),m=[{path:"/",exact:!0,layout:c.a,component:function(){return r.a.createElement(o.a,{to:"/home"})}},{path:"/help",layout:c.a,component:u.a,props:{usesConnection:!1,usesAuth:!1}},{path:"/home",layout:c.a,component:l.a,props:{usesConnection:!1,usesAuth:!0}},{path:"/package",layout:c.a,component:s.a,props:{usesConnection:!1,usesAuth:!0}},{path:"/login",layout:c.a,component:i.a,props:{usesConnection:!1,usesAuth:!0}}]},592:function(e,t,a){"use strict";a.r(t),a.d(t,"dashboardRoutes",(function(){return gt}));var n=a(0),r=a.n(n),o=a(23),c=a(33),l=a(12),s=a(26),i=a(28),u=a(27),m=a(32),d=a.n(m),p=a(47),g=a(87),f=a(4),b=a(5),h=a(34),E=a(214),v=a.n(E),y=a(612),w=a(209);function N(e){var t=e.importChart,a=e.copyChart,n=e.exportImage;return r.a.createElement("div",{className:"command-bar-container"},r.a.createElement("div",{className:"command-bar"},r.a.createElement(y.a,null,r.a.createElement(w.a,{variant:"secondary",disabled:!0},r.a.createElement("i",{className:"material-icons"},"play_arrow")),r.a.createElement(w.a,{variant:"secondary",disabled:!0},r.a.createElement("i",{className:"material-icons"},"stop")),r.a.createElement(w.a,{variant:"secondary",disabled:!0},r.a.createElement("i",{className:"material-icons"},"schedule")),r.a.createElement(w.a,{variant:"secondary",onClick:t},r.a.createElement("i",{className:"material-icons"},"save_alt")),r.a.createElement(w.a,{variant:"secondary",onClick:a},r.a.createElement("i",{className:"material-icons"},"assignment")),r.a.createElement(w.a,{variant:"secondary",onClick:function(){return n("png")}},r.a.createElement("i",{className:"material-icons"},"camera_alt")))))}var O=a(14),x=a(613);function k(e){var t=e.node,a=t.properties,n=t.label,o=[];Object.keys(a).forEach((function(e,t){a[e]&&"name"!==e&&o.push(r.a.createElement("div",{key:t},r.a.createElement("span",{className:"text-bold mr-1"},e,":"),a[e]))}));var c=Object.keys(a).length>0,l="gateway"===n,s="undefined"===typeof n?a.name:n||"";return r.a.createElement("div",{className:"chart-node ".concat(l?"gateway":""),id:"chart-node-".concat(n)},r.a.createElement("div",{className:"node-header"},r.a.createElement("div",{className:"p-1 ".concat(c?"special":"")},r.a.createElement("p",{className:"m-1"},r.a.createElement("span",{className:"text-bold"},s||r.a.createElement("span",{className:"text-warning"},"Empty Pod")),r.a.createElement(x.a,{variant:"primary",className:"ml-2 mt-1 py-1 px-2"},a.replicas)))),o.length>0&&r.a.createElement("div",{className:"node-info border-top px-2"},o))}function C(e){var t=e.label,a=e.ports,r=e.properties,o=n.createRef();return n.createElement("div",{ref:o,className:"mb-3 draggable-container",draggable:!0,onDragStart:function(e){e.dataTransfer.setData(p.REACT_FLOW_CHART,JSON.stringify({label:t,ports:a,properties:r}))}},n.createElement(k,{node:{properties:r,label:t}}))}var j=a(215),_=a(211),S=a(621);function L(e){var t=e.duplicateFlow;return r.a.createElement("div",{className:"readonly-overlay py-4 px-4 text-center"},r.a.createElement("h4",{className:"my-4"},r.a.createElement("b",null,"This flow is ",r.a.createElement("span",{className:"text-muted"},"readonly"))),r.a.createElement("p",{className:"my-4"},"To edit this flow, please duplicate it."),r.a.createElement(w.a,{onClick:t},"Duplicate Flow"))}function A(e){var t=e.link,a=e.nodes,n=e.updateLink,o=e.deleteSelection,c=t.from.nodeId,l=t.to.nodeId,s=Object.keys(a).map((function(e){return{label:a[e].label||a[e].properties.name,id:e}}));return r.a.createElement("div",{className:"h-100 d-flex flex-column"},r.a.createElement("h5",{className:"px-3 py-2 mb-0 border-bottom"},r.a.createElement("b",null,"Edit Connection")),r.a.createElement("div",{className:"flex-fill px-2"},r.a.createElement("div",{className:"p-2 mb-1"},r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"From")),r.a.createElement(_.a,{className:"mb-2",as:"select",onChange:function(e){return n(t.id,e.target.value,l)},value:c},s.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.label)}))),r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"To")),r.a.createElement(_.a,{className:"mb-2",as:"select",onChange:function(e){return n(t.id,c,e.target.value)},value:l},s.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.label)}))))),r.a.createElement("div",{className:"p-2"},r.a.createElement(w.a,{variant:"danger",className:"w-100",onClick:o},"Delete Connection")))}function T(e){var t=e.node,a=e.updateLabel,o=e.updateNewValue,c=e.updateExistingValue,l=e.deleteSelection,s=e.availableProperties,i=Object(n.useState)(""),u=Object(O.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(s),g=Object(O.a)(p,2),f=g[0],b=g[1];Object(n.useEffect)((function(){var e=s.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())}));b(e)}),[m,s]),Object(n.useEffect)((function(){d(""),b(s)}),[t.id,s]);var h=t.label||t.properties.name;return r.a.createElement("div",{className:"h-100 d-flex flex-column"},r.a.createElement("div",{className:"p-2 mb-1"},r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"Pod Name")),r.a.createElement(_.a,{spellCheck:!1,value:h,onChange:function(e){return a(e.target.value)},className:"pod-name-input"})),r.a.createElement("p",{className:"mb-0 px-2"},r.a.createElement("b",null,"Properties")),r.a.createElement("div",{className:"m-2"},r.a.createElement(_.a,{spellCheck:!1,placeholder:"search properties...",value:m,onChange:function(e){return t=e.target.value,void d(t);var t}})),r.a.createElement("div",{className:"property-table flex-fill mx-2"},f.map((function(e){var a=e.name,n=e.type,l=t.properties[a];return"undefined"==typeof l?r.a.createElement("div",{key:a,className:"property-item mb-2"},r.a.createElement("p",{className:"property-label mb-1"},a),r.a.createElement(_.a,{spellCheck:!1,placeholder:n,type:"int"===n?"number":"text",value:t.newProperties[a]||"",onChange:function(e){return o(a,e.target.value)},className:"property-value-input"})):r.a.createElement("div",{key:a,className:"property-item mb-2"},r.a.createElement("p",{className:"property-label mb-1"},a),r.a.createElement(_.a,{spellCheck:!1,placeholder:n,type:"int"===n?"number":"text",value:l||"",onChange:function(e){return c(a,e.target.value)},className:"property-value-input"}))}))),r.a.createElement("div",{className:"p-2"},r.a.createElement(w.a,{variant:"danger",className:"w-100",onClick:l},"Delete Pod")))}function F(){return r.a.createElement("div",{className:"d-flex flex-column h-100"},r.a.createElement("h5",{className:"px-3 py-2 mb-0 border-bottom"},r.a.createElement("b",null,"Add Pods")),r.a.createElement("div",{className:"p-3 scrollable flex-fill"},r.a.createElement(C,{ports:{inPort:{id:"inPort",type:"input"},outPort:{id:"outPort",type:"output"}},properties:{}}),j.map((function(e,t){return r.a.createElement(C,{key:t,ports:{inPort:{id:"inPort",type:"input"},outPort:{id:"outPort",type:"output"}},properties:e})}))))}var I=function(e){var t=e.readonly,a=e.flow,o=e.duplicateFlow,c=e.deleteSelection,s=e.updateNode,i=e.updateLink,u=e.availableProperties,m=a.selected,p=m.id,g=m.type,f=a.nodes,b=a.links,h=Object(n.useState)(),E=Object(O.a)(h,2),v=E[0],y=E[1];return Object(n.useEffect)((function(){var e;if(p){var t=f[p];t&&(e=function(e){var t=Object(l.a)({},e.properties);return{label:e.label||"",id:e.id,properties:t,newProperties:{}}}(t)),y(e)}}),[f,p]),r.a.createElement(S.a,{className:"flowchart-sidebar mb-4"},p?"link"===g?r.a.createElement(A,{nodes:f,link:b[p],updateLink:i,deleteSelection:c}):v&&r.a.createElement(T,{availableProperties:u,node:v,updateLabel:function(e){s(Object(l.a)(Object(l.a)({},v),{},{label:e}))},updateNewValue:function(e,t){if(v){var a=d.a.cloneDeep(v);a.newProperties[e]=t,s(Object(l.a)({},a))}},updateExistingValue:function(e,t){if(v){var a=d.a.cloneDeep(v);a.properties[e]=t,s(Object(l.a)({},a))}},deleteSelection:c}):r.a.createElement(F,null),t&&r.a.createElement(L,{duplicateFlow:o}))};function D(){return r.a.createElement("div",{className:"node-port"},r.a.createElement("i",{className:"fa fa-chevron-down","data-html2canvas-ignore":"true"}))}var R=a(617);function M(e){return e.selected?r.a.createElement("i",{className:"material-icons text-primary"},"radio_button_checked"):r.a.createElement("i",{className:"material-icons"},"radio_button_unchecked")}function P(e){var t=e.connected;return e.show?t?r.a.createElement("i",{className:"material-icons ml-2 text-success"},"wifi"):r.a.createElement("i",{className:"material-icons ml-2 text-warning"},"wifi_off"):null}function W(e){var t=e.connected;return e.show?t?r.a.createElement("i",{className:"material-icons text-white ml-1 mr-2"},"wifi"):r.a.createElement("i",{className:"material-icons text-warning ml-1 mr-2"},"wifi_off"):null}function H(e){var t=e.show,a=e.deleteFlow;return t?r.a.createElement("i",{className:"material-icons text-danger float-right",onClick:a},"delete"):null}function B(e){var t=e.isEditing,a=e.toggleEditing;return t?r.a.createElement("i",{onClick:a,className:"material-icons float-right cursor-pointer text-success"},"done"):r.a.createElement("i",{onClick:a,className:"material-icons float-right cursor-pointer"},"edit")}function U(e){var t=e.flows,a=e.loadFlow,o=e.selectedFlowId,c=e.createNewFlow,l=e.deleteFlow,s=e.connected,i=Object(n.useState)(!1),u=Object(O.a)(i,2),m=u[0],d=u[1],p=Object.entries(t).filter((function(e){var t=Object(O.a)(e,2);t[0];return"example"!==t[1].type})),g=Object.entries(t).filter((function(e){var t=Object(O.a)(e,2);t[0];return"example"===t[1].type})),f=t[o];return r.a.createElement(R.a,{className:"flow-selection"},r.a.createElement(R.a.Toggle,null,f.name,r.a.createElement(W,{show:"remote"===f.type,connected:s})),r.a.createElement(R.a.Menu,null,r.a.createElement(R.a.Item,{onClick:c},r.a.createElement("i",{className:"material-icons"},"add"),"New Flow"),r.a.createElement(R.a.Header,{className:"text-uppercase"},"Your Flows"," ",r.a.createElement(B,{isEditing:m,toggleEditing:function(){d((function(e){return!e}))}})),p.map((function(e,t){var n=Object(O.a)(e,2),c=n[0],i=n[1];return r.a.createElement(R.a.Item,{onClick:function(){return a(c)},key:t},r.a.createElement(M,{selected:c===o}),i.name,r.a.createElement(P,{show:"remote"===i.type,connected:s}),r.a.createElement(H,{show:"user-generated"===i.type&&m,deleteFlow:function(e){return l(e,c)}}))})),r.a.createElement(R.a.Header,{className:"text-uppercase"},"Examples"),g.map((function(e,t){var n=Object(O.a)(e,2),c=n[0],l=n[1];return r.a.createElement(R.a.Item,{onClick:function(){return a(c)},key:t},r.a.createElement(M,{selected:c===o}),l.name)}))))}var G=a(20);function J(e){return r.a.createElement("div",{className:"tooltip-container"},r.a.createElement("img",{className:"tooltip-icon",src:"../../icon.png",alt:"Tooltip Icon"}),r.a.createElement("span",{className:"tooltip-text"},e.tooltip))}var V={tooltipsGlobal:{showTooltip:!0,toogleOffWhenClicked:"global",text:"Hold Shift and click to select multiple nodes"}},Y=a(120),q=a(35);var z=function(e){return e.flowState.flows},$=function(e){return e.flowState.selectedFlow},K=["onDragNodeStop","onCanvasDrop","onCanvasClick","onNodeClick","onDragCanvasStop","updateNode","updateLink"],Q=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=document.querySelector(".chart-container");e&&e.addEventListener("contextmenu",(function(e){return e.preventDefault()}))},n.componentWillUnmount=function(){b.c.removeListener("update-flowchart",n.getData),b.c.removeListener("update-ui",n.getConnectionStatus)},n.exportImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png",t=document.querySelector(".chart-container"),a=document.querySelector(".capture-overlay");if(t){a&&a.classList.add("fade-out"),n.showCaptureOverlay(),setTimeout((function(){return n.showCaptureOverlay(!1)}),500);var r={foreignObjectRendering:!0,logging:!0,x:0,y:0,scrollX:0,scrollY:0,scale:5};v()(t,r).then((function(t){var a=t.toDataURL("image/".concat(e)),n=document.getElementById("download-link");n&&(n.setAttribute("download","jina-flow-visual.".concat(e)),n.setAttribute("href",a),n.click())}))}},n.showCaptureOverlay=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.setState({showOverlay:e})},n.getData=function(){var e=n.props.flowChart,t=e.flow,a=e.type,r=n.props.selectedFlowId,o=n.props.flows;n.setState({chart:t,flowType:a,selectedFlowId:r,flows:o})},n.getConnectionStatus=function(){var e=b.c.getConnectionStatus();n.setState({connected:e})},n.updateNode=function(e){var t=n.state.chart,a=Object(m.cloneDeep)(t);a.nodes[e.id].label=e.label;var r=Object(l.a)(Object(l.a)({},e.properties),e.newProperties);return Object.keys(r).forEach((function(e){""!==r[e]&&"undefined"!==typeof r[e]||delete r[e]})),a.nodes[e.id].properties=r,n.updateFlow(Object(l.a)(Object(l.a)({},t),a),"updateNode"),a.nodes[e.id]},n.updateLink=function(e,t,a){if(t!==a){var r=n.state.chart,o=Object(m.cloneDeep)(r);o.links[e].from.nodeId=t,o.links[e].to.nodeId=a,n.updateFlow(Object(l.a)(Object(l.a)({},r),o),"updateLink")}},n.deleteSelection=function(){n.state.actionCallbacks.onDeleteKey({})},n.updateFlow=function(e,t){if(K.includes(t))return n.syncFlow(e);n.setState({chart:e})},n.syncFlow=function(e){n.props.updateFlow(e)},n.selectNode=function(e){b.b.dispatch({actionType:b.a.SELECT_NODE,payload:e.nodeId})},n.copyChartAsYAML=function(){Object(G.a)(Object(G.b)(n.props.chart)),alert("Chart copied to clipboard as YAML")},n.validateLink=function(e){var t=e.fromNodeId,a=e.toNodeId,n=e.fromPortId,r=e.toPortId;return!(t===a||n===r)},n.showImportModal=function(){b.b.dispatch({actionType:b.a.SHOW_MODAL,payload:{modal:"import"}})},n.loadFlow=function(e){n.props.loadFlow(e)},n.createNewFlow=function(e){e.preventDefault(),e.stopPropagation(),n.props.createNewFlow()},n.deleteFlow=function(e,t){e.preventDefault(),e.stopPropagation(),n.props.deleteFlow(t)},n.duplicateFlow=function(){var e=Object(G.b)(n.props.chart);n.props.duplicateFlow(e)},n.render=function(){var e=n.state,t=e.showOverlay,a=e.connected,o=e.availableProperties,c=e.actionCallbacks,l="user-generated"!==n.props.flowChart.type;return r.a.createElement(f.i,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement("a",{href:"/#",id:"download-link",style:{display:"none"}},"download"),r.a.createElement(f.u,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(h.a,{title:"Flow Design",className:"text-sm-left mb-3"})),r.a.createElement("div",{className:"flow-container d-flex flex-column flex-md-row"},r.a.createElement(f.d,{className:"chart-section-container mr-md-4 mb-4"},r.a.createElement(U,{connected:a,flows:n.props.flows,selectedFlowId:n.props.selectedFlowId,createNewFlow:n.createNewFlow,loadFlow:n.loadFlow,deleteFlow:n.deleteFlow}),r.a.createElement(N,{copyChart:n.copyChartAsYAML,importChart:n.showImportModal,exportImage:n.exportImage}),r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"capture-overlay",style:{display:t?"":"none"}},r.a.createElement("div",{className:"capture-overlay-top"}),r.a.createElement("div",{className:"capture-overlay-bottom"})),r.a.createElement(p.FlowChart,{chart:n.props.chart,Components:{TooltipComponent:J,NodeInner:k,Port:D},callbacks:c,config:{readonly:l,validateLink:n.validateLink}}))),r.a.createElement(I,{availableProperties:o,duplicateFlow:n.duplicateFlow,readonly:l,flow:n.props.chart,deleteSelection:n.deleteSelection,updateNode:n.updateNode,updateLink:n.updateLink}))))};var o=e.selectedFlowId,c=e.flows,i=b.c.getConnectionStatus(),u=b.c.getAvailableProperties();return n.state={availableProperties:u,connected:i,selectedFlowId:o,flows:c,showOverlay:!1,actionCallbacks:Object.keys(g).reduce((function(e,t,a){return e[t]=function(){var e=n.props.chart,a=g[t],r=a.apply(void 0,arguments),o=r(e);return n.updateFlow(Object(l.a)(Object(l.a)({},e),o),t),o},e}),{})},b.c.on("update-ui",n.getConnectionStatus),b.c.on("update-flowchart",n.getData),n}return a}(r.a.Component);var X=Object(Y.b)((function(e){var t=function(e){return e.flowState.flows[e.flowState.selectedFlow]}(e),a=t.flow;return{chart:Object(l.a)(Object(l.a)({},a),V),flowChart:t,flows:z(e),selectedFlowId:$(e)}}),{loadFlow:function(e){return{type:q.d,payload:e}},createNewFlow:function(){return{type:q.a}},updateFlow:function(e){return{type:q.e,payload:e}},duplicateFlow:function(e){return{type:q.c,payload:e}},deleteFlow:function(e){return{type:q.b,payload:e}}})(Q),Z=a(39),ee=a(615),te=a(611),ae=a(162),ne=a(43),re=a.n(ne),oe=function(e){var t=e.palette;return{INFO:{borderColor:t.info,backgroundColor:"rgba(0, 153, 153, 0.9)"},SUCCESS:{borderColor:t.success,backgroundColor:"rgba(50, 200, 205, 0.9)"},WARNING:{borderColor:t.warning,backgroundColor:"rgba(255, 204, 102, 0.9)"},ERROR:{borderColor:t.error,backgroundColor:"rgba(255, 102, 102, 0.9)"},CRITICAL:{borderColor:t.critical,backgroundColor:"rgba(255, 70, 64, 0.9)"},DEBUG:{borderColor:t.debug,backgroundColor:"rgba(110, 114, 120, 0.9)"}}},ce=a(618);function le(e,t){var a=oe(t);return Object.keys(a).map((function(t){var n=e.map((function(e){return e.levels[t]}));return{barPercentage:.75,categoryPercentage:1,label:t,fill:"start",backgroundColor:a[t].backgroundColor,data:n}}))}function se(e){for(var t=[],a=0;a<(e||0);++a)t.push(a);return t}var ie=function(e){var t=e.width,a=e.height,o=e.data,c=e.numTicks,l=e.onClick,s=e.timeLabels,i=Object(n.useRef)(null),u=Object(n.useState)(null),m=Object(O.a)(u,2),d=m[0],p=m[1],g=Object(ce.b)();function f(e){if(d){var t=d.getElementsAtEvent(e);l(t)}}var b=Object(n.useCallback)((function(e,t,a){return 0===t?s[0]:t===Math.floor(a.length/2)?s[1]:void 0}),[s]);function h(e){if(Number.isInteger(e))return e}function E(){return r.a.createElement("div",{className:"chart-legend mt-1 mb-3","data-name":"logOccurencesChartLegend"},Object.entries(oe(g)).map((function(e){var t=Object(O.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{className:"chart-legend-item",key:a},r.a.createElement("div",{className:"chart-legend-indicator mr-1 ".concat(a.toLowerCase()),style:{backgroundColor:n.borderColor}}),r.a.createElement("span",{className:"chart-legend-caption mr-2"},a))})))}return Object(n.useEffect)((function(){if(i.current){var e={animation:{duration:0},events:["click"],onClick:f,maintainAspectRatio:!0,responsive:!0,legend:{display:!1},tooltips:{enabled:!1},elements:{point:{radius:0,hitRadius:20}},scales:{xAxes:[{stacked:!0,ticks:{padding:5,maxRotation:0,autoSkip:!1,callback:b},gridLines:{zeroLineColor:"#cfd8dc",color:"#cfd8dc"}}],yAxes:[{stacked:!0,scaleLabel:{display:!1},gridLines:{borderDash:[5,5],zeroLineColor:"#cfd8dc",drawBorder:!1,color:"#cfd8dc"},ticks:{padding:5,suggestedMin:0,autoSkip:!0,maxTicksLimit:4,callback:h}}]}},t={type:"bar",data:{datasets:le(o,g)},options:e},a=new re.a(i.current,t);p(a)}}),[]),Object(n.useEffect)((function(){if(d){var e={labels:se(c),datasets:le(o,g)};d.data=e,d.update()}}),[o,d,c,g]),Object(n.useEffect)((function(){d&&d.options.scales&&d.options.scales.xAxes&&d.options.scales.xAxes[0].ticks&&(d.options.scales.xAxes[0].ticks.callback=b,d.update())}),[b,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement("canvas",{height:a||10,width:t||100,ref:i}))},ue=a(53);function me(e){var t=e.data,a=t.data,n=(t.numSeconds,t.numTicks),o=e.showLog,c=e.setTimeSelection,l=e.timeOptions,s=e.selectedTime,i=e.timeLabels;return r.a.createElement(S.a,{className:"h-100"},r.a.createElement(S.a.Header,{className:"p-2 px-3"},r.a.createElement(te.a,null,r.a.createElement(ae.a,{"data-name":"logOccurenceTitle"},"Log Occurences by Level"),r.a.createElement(ae.a,{className:"text-right","data-name":"logOccurenceDurationSelect"},r.a.createElement(ue.a,{clearAfter:!0,options:Object.values(l),onFilterChange:function(e){return c(e[0].value)},className:"logstream-select text-left",placeholder:r.a.createElement("span",{"data-name":"logOccurenceDurationSelectedOption"},r.a.createElement("i",{className:"material-icons mr-2"},"access_time"),l[s].label),isSearchable:!1})))),r.a.createElement(S.a.Body,{className:"d-none d-md-block p-0 pb-2 px-3"},r.a.createElement(ie,{timeLabels:i,data:a,numTicks:n,height:10,width:70,onClick:o})),r.a.createElement(S.a.Body,{className:"d-md-none pb-2"},r.a.createElement(ie,{timeLabels:i,data:a,numTicks:n,height:20,width:50,onClick:o})))}var de=function(e){var t=e.width,a=e.height,o=e.data,c=Object(n.useRef)(null),l=Object(n.useState)(null),s=Object(O.a)(l,2),i=s[0],u=s[1],m=Object(ce.b)(),d=Object(n.useCallback)((function(e){return oe(m)[e]}),[m]);return Object(n.useEffect)((function(){if(c.current){var e=Object.keys(o),t={type:"pie",data:{datasets:[{borderWidth:1,data:Object.values(o),borderColor:e.map((function(e){return d(e).borderColor})),backgroundColor:e.map((function(e){return d(e).backgroundColor}))}]},options:{animation:{duration:0},legend:{display:!1,position:"bottom",labels:{padding:25,boxWidth:20}},tooltips:{mode:"index",position:"nearest"}}},a=new re.a(c.current,t);u(a)}}),[]),Object(n.useEffect)((function(){if(i){var e=Object.keys(o),t={labels:e,datasets:[{borderWidth:1,data:Object.values(o),borderColor:e.map((function(e){return d(e).borderColor})),backgroundColor:e.map((function(e){return d(e).backgroundColor}))}]};i.data=t,i.update()}}),[o,i,d]),r.a.createElement("canvas",{height:a||50,width:t||50,ref:c})};function pe(e){var t=e.data;return r.a.createElement(S.a,{className:"h-100"},r.a.createElement(S.a.Header,{className:"text-center p-2"},"Log Levels"),r.a.createElement(S.a.Body,{className:"px-3 pt-0 pb-3"},r.a.createElement(de,{data:t})))}var ge=a(16),fe=a.n(ge),be=a(22),he=a(124),Ee=a(219),ve=a(220),ye=a.n(ve),we=a(79),Ne=a(13),Oe=Object(n.memo)((function(e){var t=e.index,a=e.style,n=e.data,r=n.columns,o=n.items,c=n.showLogDetails,l=o[t],s=l.name,i=l.msg,u=l.levelname,m=l.process,d=l.formattedTimestamp,p=l.idx,g=String(s);g=g.length>20?g.substring(0,20):g;var f=String(u)[0],b=r.firstCol,h=r.secondCol,E=r.thirdCol;return Object(Ne.c)("div",{className:"log log-".concat(String(u).toLowerCase()," px-4 border-bottom py-1"),css:{maxHeight:84},style:a,onClick:function(){return c(l)}},Object(Ne.c)(te.a,null,Object(Ne.c)(ae.a,{className:"log-prefix text-muted px-0 d-flex flex-row",css:{maxWidth:b}},Object(Ne.c)("div",{className:"text-bold mr-2"},p),Object(Ne.c)("div",{className:"ml-auto"},d)),Object(Ne.c)(ae.a,{className:"log-prefix px-0 text-left text-md-right text-bold cursor-pointer",css:{maxWidth:h}},g,"@",m,"[",f,"]:"),Object(Ne.c)(ae.a,{className:"px-0",css:{maxHeight:84,display:"block",overflow:"hidden",textOverflow:"ellipsis",width:E,whiteSpace:"nowrap",paddingRight:0,marginRight:0}},i)))}),he.b),xe=function(e){var t=e.columns,a=t.firstCol,n=t.secondCol,r=e.border;return Object(Ne.c)("div",{className:"px-4 py-1 bg-light text-monospace ".concat(r?"border-top":""),css:{maxHeight:84}},Object(Ne.c)(te.a,null,Object(Ne.c)(ae.a,{className:"log-prefix text-muted px-0 d-flex flex-row",css:{maxWidth:a}},Object(Ne.c)("div",{className:"text-bold mr-2"},"#"),Object(Ne.c)("div",{className:"ml-auto"},"timestamp")),Object(Ne.c)(ae.a,{className:"log-prefix px-0 text-left text-md-right text-bold",css:{maxWidth:n}},"source@process[level]:"),Object(Ne.c)(ae.a,{className:"px-0",css:{maxHeight:84,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingRight:0,marginRight:0}},"message")))},ke=a(117),Ce=a(614),je={success:{name:"check_circle",color:"success"},pending:{name:"pending",color:"muted"},warning:{name:"error",color:"warning"},failed:{name:"cancel",color:"critical"}};function _e(e){var t=e.levels,a=e.numItems;return console.log("levels:",t),r.a.createElement("span",{className:"ml-2 text-muted"},"(",a,")")}function Se(e){var t=function(e){var t=Object.keys(e);return t.find((function(e){return"critical"===e.toLowerCase()}))||t.find((function(e){return"error"===e.toLowerCase()}))?"failed":t.find((function(e){return"warning"===e.toLowerCase()}))?"warning":"success"}(e.levels),a=je[t];return r.a.createElement("i",{className:"no-select material-icons log-".concat(a.color," mr-2")},a.name)}function Le(e){var t=e.expanded;return r.a.createElement("i",{className:"no-select material-icons text-muted cursor-pointer ".concat(t?"rotate-90":""," mr-2")},"arrow_forward_ios")}function Ae(e){var t=e.title,a=e.body,o=e.levels,c=e.numItems,l=e.group,s=Object(n.useState)(!1),i=Object(O.a)(s,2),u=i[0],m=i[1];return r.a.createElement("div",{className:"log-group-item m-2 ".concat(u?"bg-light":"")},r.a.createElement("div",{className:"log-group-header cursor-pointer p-2",onClick:function(){return m((function(e){return!e}))}},r.a.createElement(Le,{expanded:u}),o&&r.a.createElement(Se,{levels:o}),r.a.createElement("span",{className:"group-level"===l?"log-".concat(t.toLowerCase()):""},t),!o&&r.a.createElement(_e,{levels:o,numItems:c,title:t})),r.a.createElement(Ce.a,{in:u,timeout:100},r.a.createElement("div",{className:"log-group-body p-3"},r.a.createElement("div",{className:"bg-white border"},a))))}var Te="logs-view-preference",Fe=["INFO","SUCCESS","WARNING","ERROR","CRITICAL","DEBUG"],Ie=[{value:"csv",label:"CSV"},{value:"json",label:"JSON"},{value:"txt",label:"TXT"}],De={table:{value:"table",label:"Table View"},"group-pod":{value:"group-pod",label:"Group by Pod"},"group-level":{value:"group-level",label:"Group by Level"}};function Re(){return function(){var e=localStorage.getItem(Te);return!(!e||!De[e])&&e}()||"table"}var Me=0,Pe=ye.a.create({doc:{id:"id",field:["filename","funcName","module","msg","pathname","name"]}}),We=function(e,t){var a=function(e){return"jina-logs-".concat(new Date,".").concat(e)}(t);return"csv"===t?Object(we.saveAs)(Object(G.g)(e),a):"json"===t?Object(we.saveAs)(Object(G.h)(e),a):"txt"===t?Object(we.saveAs)(Object(G.i)(e),a):void 0},He=function(e,t){return t.items[e].id},Be=function(e){return Array.isArray(e)?e:Array.from(e)},Ue=function(e){return Be(e).map((function(e){return{label:e,value:e}}))};function Ge(e){var t=e.data,a=e.firstCol,o=e.secondCol,c=e.showLogDetails,l=e.small,s=Object(n.useRef)(),i=Object(n.useState)(!0),u=Object(O.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){s.current&&m&&s.current.scrollToItem(t.length)}),[t.length,m]),r.a.createElement("div",null,r.a.createElement(xe,{columns:{firstCol:a,secondCol:o},border:!l}),r.a.createElement("div",{className:"log-stream-container".concat(l?"-small":""," p-0 border-top")},!m&&r.a.createElement("div",{onClick:function(){return s.current.scrollToItem(t.length)},className:"back-to-bottom active"},r.a.createElement("i",{className:"material-icons"},"arrow_downward")," Back to Bottom"),r.a.createElement(Ee.a,null,(function(e){var n=e.height,l=e.width,i=l-(a+o);return r.a.createElement(he.a,{onScroll:function(e){var a=e.scrollOffset;d((a+n)/30-t.length===0)},height:n,width:l,itemCount:t.length,itemSize:30,itemKey:He,itemData:{items:t,columns:{firstCol:a,secondCol:o,thirdCol:i},showLogDetails:c},ref:s},Oe)}))))}function Je(e){var t=e.groupedData,a=e.grouping,n=e.firstCol,o=e.secondCol,c=e.showLogDetails;return r.a.createElement(S.a.Body,{className:"log-stream-container p-0 border-top"},Object.keys(t).length&&r.a.createElement("div",{className:"log-group-container"},Object.entries(t).map((function(e,t){var l=Object(O.a)(e,2),s=l[0],i=l[1];return r.a.createElement(Ae,{group:a,key:t,title:s,levels:i.levels,numItems:i.data.length,body:r.a.createElement(Ge,{firstCol:n,secondCol:o,data:i.data,showLogDetails:c,small:!0})})}))))}function Ve(e){var t=e.data,a=e.showLogDetails,o=Object(n.useState)((function(){return Re()})),c=Object(O.a)(o,2),l=c[0],s=c[1],i=Object(n.useState)([]),u=Object(O.a)(i,2),m=u[0],p=u[1],g=Object(n.useState)([]),f=Object(O.a)(g,2),b=f[0],h=f[1],E=Object(n.useState)([]),v=Object(O.a)(E,2),y=v[0],w=v[1],N=Object(n.useState)(""),x=Object(O.a)(N,2),k=x[0],C=x[1],j=Object(n.useCallback)(Object(be.a)(fe.a.mark((function e(){var a,n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.slice(Me,t.length),Pe.add(a),Me=t.length,e.next=5,Pe.search(k);case 5:n=e.sent,w(n);case 7:case"end":return e.stop()}}),e)}))),[k,t.length]);function _(e){var t;s(e),t=e,localStorage.setItem(Te,t)}Object(n.useEffect)((function(){k&&t.length&&j()}),[t.length,k,j]);var L,A=k?y:t,T=t.reduce((function(e,t){return e.add(t.name)}),new Set),F=(A||[]).filter((function(e){return t=e,a={levelname:b.map((function(e){return e.value})),name:m.map((function(e){return e.value}))},Object.entries(a).reduce((function(e,a){var n=Object(O.a)(a,2),r=n[0],o=n[1];return e&&Array.isArray(o)?0===o.length||o.includes(t[r]):o===t[r]}),!0);var t,a}));if("group-pod"===l){var I=Be(T).map((function(e){return e.toLowerCase().split("-")[0]}));L={},I.forEach((function(e){var t={};t.data=(F||[]).filter((function(t){return t.name&&t.name.toLowerCase().startsWith(e)})),t.data.length&&(t.levels=d.a.countBy(t.data,"levelname"),L[e]=t)}))}else"group-level"===l&&(L={},Fe.forEach((function(e){var t={};t.data=(F||[]).filter((function(t){return t.levelname===e})),t.data.length&&(L[e]=t)})));return r.a.createElement(S.a,{className:"mb-4"},r.a.createElement(S.a.Header,{className:"p-0"},r.a.createElement(te.a,{className:"p-3"},r.a.createElement(ae.a,{md:"8"},r.a.createElement(ue.a,{clearAfter:!0,options:Object.values(De),onFilterChange:function(e){return _(e[0].value)},className:"logstream-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:"table"===l?r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons mr-2"},"table_rows"),"Table View"):r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons mr-2"},"view_list"),De[l].label),isSearchable:!1}),"table"===l&&r.a.createElement(ue.a,{isMulti:!0,options:Ue(T),onFilterChange:p,className:"logstream-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons mr-2"},"mediation"),"All Sources")}),r.a.createElement(ue.a,{isMulti:!0,options:Ue(Fe),onFilterChange:h,className:"logstream-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons mr-2"},"bar_chart"),"All Levels")}),r.a.createElement(ue.a,{clearAfter:!0,options:Ie,onFilterChange:function(e){return We(t,e[0].value)},className:"logstream-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons mr-2"},"download"),"Download Logs"),isSearchable:!1})),r.a.createElement(ae.a,{md:"4"},r.a.createElement(ke.a,{placeholder:"search logs...",value:k,onChange:C})))),"table"===l?r.a.createElement(Ge,{firstCol:300,secondCol:300,data:F,showLogDetails:a}):r.a.createElement(Je,{firstCol:300,secondCol:300,grouping:l,groupedData:L,showLogDetails:a}))}var Ye,qe,ze="logs-time-preference",$e={"60second":{value:"60second",label:"60 Seconds",chartLabels:["60s ago","30s ago",""]},"15minute":{value:"15minute",label:"15 Minutes",chartLabels:["15m ago","7m 30s ago",""]},"1hour":{value:"1hour",label:"1 Hour",chartLabels:["1h ago","30m ago",""]}},Ke={"60second":60,"15minute":900,"1hour":3600};function Qe(){return function(){var e=localStorage.getItem(ze);return!(!e||!$e[e])&&e}()||"60second"}var Xe=function(e){b.b.dispatch({actionType:b.a.SHOW_MODAL,payload:{modal:"logDetails",modalParams:{log:e}}})};function Ze(e){var t=e.elapsed;return r.a.createElement(f.d,{className:"p-3 h-100"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center mb-0"},r.a.createElement("b",null,t.task_name)),r.a.createElement("h2",{className:"my-3 mx-auto"},t.seconds),r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center"},"Elapsed Time"))}var et=function(e){var t=e.progress,a=Object(n.useRef)(null),o=Object(n.useState)(null),c=Object(O.a)(o,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){if(a.current){var e=new re.a(a.current,{type:"doughnut",data:{datasets:[{hoverBorderColor:"#fff",data:[0,100],backgroundColor:["#32c8cd","#E9ECEF"]}],labels:["Label 1","Label 2"]},options:{legend:{display:!1},responsive:!1,cutoutPercentage:70,animation:{duration:0},tooltips:{enabled:!1}}});s(e)}}),[]),Object(n.useEffect)((function(){if(l){var e=100*(t.num_bars/t.bar_len||1),a={datasets:[{hoverBorderColor:"#fff",data:[e,100-e],backgroundColor:["#32c8cd","#E9ECEF"]}],labels:["Label 1","Label 2"]};l.data=a,l.update()}}),[JSON.stringify(t),l]),r.a.createElement(f.d,{className:"p-3 h-100"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center"},r.a.createElement("b",null,"Progress")),r.a.createElement("div",{className:"go-stats__chart mx-auto d-flex flex-row"},r.a.createElement("div",{className:"mr-4 mt-3"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center"},"Request"),r.a.createElement("h4",{className:"mb-0"},t.currentRequest)),r.a.createElement("canvas",{ref:a,style:{width:"100px",height:"100px"},className:"my-auto"})))};var tt=function(e){var t=e.speed,a=Object(n.useRef)(null),o=Object(n.useState)(null),c=Object(O.a)(o,2),s=c[0],i=c[1],u=t.history,m=Object(ce.b)().palette,d=Math.max.apply(Math,Object(Z.a)(u)),p=Math.min.apply(Math,Object(Z.a)(u)),g=Object(n.useCallback)((function(){var e=d-p;return{maintainAspectRatio:!0,responsive:!0,animation:{duration:0},legend:{display:!1},tooltips:{enabled:!1},layout:{padding:{bottom:-10,left:-10}},elements:{point:{radius:0},line:{tension:.33}},scales:{xAxes:[{gridLines:{display:!1},ticks:{display:!1}}],yAxes:[{gridLines:{display:!1},scaleLabel:{padding:0,display:!1},ticks:{display:!1,suggestedMax:d+.1*e,suggestedMin:p-.1*e}}]}}}),[d,p]),b=Object(n.useCallback)((function(e){return{type:"line",data:{labels:new Array(u.length).fill(null),datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(0, 153, 153, 0.25)",borderColor:m.primary,data:u}]},options:e}}),[u,m.primary]);return Object(n.useEffect)((function(){if(a.current){var e=g(),t=b(e),n=new re.a(a.current,t);i(n)}}),[]),Object(n.useEffect)((function(){if(s){var e=Object(l.a)(Object(l.a)({},s.data),{datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(0, 153, 153, 0.25)",borderColor:m.primary,data:u}]});s.options=g(),s.data=e,s.update()}}),[u,s,g,b,m.primary]),r.a.createElement(f.d,{className:"pt-0 h-100 stats-small"},r.a.createElement("div",{className:"stats-small__data mx-auto"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center mb-0 pt-0 mt-0"},r.a.createElement("b",null,"Speed")),r.a.createElement("h2",{className:"my-3 mx-auto"},t.current),r.a.createElement("h6",{className:"stats-small__label under text-uppercase text-center"},t.unit,"/Second")),r.a.createElement("canvas",{height:"100",ref:a,className:"stats-small-1"}))};var at=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(null),o=Object(O.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)("messages"),i=Object(O.a)(s,2),u=i[0],m=i[1],d=Object(ce.b)().palette,p=e[u],g=Object(n.useCallback)((function(){return{animation:{duration:0},tooltips:{callbacks:{title:function(e){return"Pod: ".concat(e[0].xLabel)},label:function(e,t){var a="".concat(t.datasets[e.datasetIndex].label,": ").concat("bytes"===u?Object(G.c)(e.value):e.value);return a},afterLabel:function(e){return"\nProcess ID: "+p[e.index].process}}},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{callback:function(e){return"bytes"===u?Object(G.c)(e):e>999?"".concat((e/1e3).toFixed(0),"k"):e}}}]},maintainAspectRatio:!1}}),[p,u]),b=Object(n.useCallback)((function(e){return{type:"bar",options:e,data:{labels:p.map((function(e){return e.node})),datasets:[{label:"msg sent",fill:"start",data:p.map((function(e){return e.sent})),backgroundColor:d.primary,borderColor:d.primary,pointBackgroundColor:d.background.default,pointHoverBackgroundColor:d.primary,borderWidth:1.5},{label:"msg received",fill:"start",data:p.map((function(e){return e.received})),backgroundColor:d.success,borderColor:d.success,pointBackgroundColor:d.background.default,pointHoverBackgroundColor:d.success,borderWidth:1.5}]}}}),[p,d.success,d.primary,d.background.default]),h=Object(n.useCallback)((function(){return{labels:p.map((function(e){return e.node})),datasets:[{label:"".concat(u," sent"),fill:"start",data:p.map((function(e){return e.sent})),backgroundColor:d.primary,borderColor:d.primary,pointBackgroundColor:d.background.default,pointHoverBackgroundColor:d.primary,borderWidth:1.5},{label:"".concat(u," received"),fill:"start",data:p.map((function(e){return e.received})),backgroundColor:d.success,borderColor:d.success,pointBackgroundColor:d.background.default,pointHoverBackgroundColor:d.success,borderWidth:1.5}]}}),[p,u,d.success,d.primary,d.background.default]);return Object(n.useEffect)((function(){if(t.current){var e=g(),a=b(e),n=new re.a(t.current,a);l(n)}}),[]),Object(n.useEffect)((function(){if(c){var e=h(),t=g();c.options=t,c.data=e,c.update()}}),[p,c,u,h,g]),r.a.createElement(f.d,{small:!0,className:"h-100 mb-4"},r.a.createElement(f.f,{className:"border-bottom"},r.a.createElement("h6",{className:"m-0"},"Network Load")),r.a.createElement(f.e,{className:"pt-0"},r.a.createElement(f.u,{className:"border-bottom py-2 bg-light"},r.a.createElement(f.g,{sm:"6",className:"col d-flex mb-2 mb-sm-0"},r.a.createElement(f.c,null,r.a.createElement(f.b,{theme:"white",active:"messages"===u,onClick:function(){return m("messages")}},"Messages"),r.a.createElement(f.b,{theme:"white",active:"bytes"===u,onClick:function(){return m("bytes")}},"Bytes")))),r.a.createElement("div",{style:{position:"relative",height:300}},r.a.createElement("canvas",{ref:t}))))};var nt=function(e){var t=e.qps,a=Object(n.useRef)(null),o=Object(n.useState)(null),c=Object(O.a)(o,2),s=c[0],i=c[1],u=t.history,m=Math.max.apply(Math,Object(Z.a)(u)),d=Math.min.apply(Math,Object(Z.a)(u)),p=Object(n.useCallback)((function(){var e=m-d;return{maintainAspectRatio:!0,responsive:!0,animation:{duration:0},legend:{display:!1},tooltips:{enabled:!1},elements:{point:{radius:0},line:{tension:.33}},layout:{padding:{bottom:-10,left:-10}},scales:{xAxes:[{gridLines:{display:!1},ticks:{display:!1}}],yAxes:[{gridLines:{display:!1},scaleLabel:{display:!1},ticks:{display:!1,suggestedMax:m+.1*e,suggestedMin:d-.1*e}}]}}}),[m,d]),g=Object(n.useCallback)((function(e){return{type:"line",data:{labels:new Array(u.length).fill(null),datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(50, 200, 205, 0.25)",borderColor:"#32c8cd",data:u}]},options:e}}),[u]);return Object(n.useEffect)((function(){if(a.current){var e=p(),t=g(e),n=new re.a(a.current,t);i(n)}}),[]),Object(n.useEffect)((function(){if(s){var e=Object(l.a)(Object(l.a)({},s.data),{datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(50, 200, 205, 0.25)",borderColor:"#32c8cd",data:u}]});s.options=p(),s.data=e,s.update()}}),[u,s,p,g]),r.a.createElement(f.d,{className:"pt-0 h-100 stats-small"},r.a.createElement("div",{className:"stats-small__data mx-auto"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center mb-0 pt-0 mt-0"},r.a.createElement("b",null,"QPS")),r.a.createElement("h2",{className:"my-3 mx-auto"},t.current),r.a.createElement("h6",{className:"stats-small__label under text-uppercase text-center"},"Queries/Second")),r.a.createElement("canvas",{height:"100",ref:a,className:"stats-small-1"}))},rt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentWillUnmount=function(){b.c.removeListener("update-task",n.getData)},n.getData=function(){var e=b.c.getTaskData();n.setState({taskData:e})},n.render=function(){var e=n.state.taskData;return r.a.createElement(ee.a,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement(te.a,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(h.a,{title:"Task",className:"text-sm-left mb-3"})),r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:"6",lg:"6",xl:"3",className:"mb-4"},r.a.createElement(Ze,{elapsed:e.elapsed})),r.a.createElement(ae.a,{md:"6",lg:"6",xl:"3",className:"mb-4"},r.a.createElement(et,{progress:e.progress})),r.a.createElement(ae.a,{md:"6",lg:"6",xl:"3",className:"mb-4"},r.a.createElement(nt,{qps:e.qps})),r.a.createElement(ae.a,{md:"6",lg:"6",xl:"3",className:"mb-4"},r.a.createElement(tt,{speed:e.speed}))),r.a.createElement(at,{messages:e.messages,bytes:e.bytes,lastUpdate:e.lastUpdateChart})))},n.state={taskData:b.c.getTaskData()},b.c.on("update-task",n.getData),n}return a}(r.a.Component),ot=[{label:"Host",placeholder:"0.0.0.0",value:"host"},{label:"Port",placeholder:"5000",value:"port"}],ct=[{label:"Log",placeholder:"/stream/log",value:"log"},{label:"Profile",placeholder:"/stream/profile",value:"profile"},{label:"YAML",placeholder:"/data/yaml",value:"yaml"},{label:"Shutdown",placeholder:"/action/shutdown",value:"shutdown"},{label:"Ready",placeholder:"/status/isready",value:"ready"}];function lt(e){var t=e.colSpan,a=void 0===t?6:t,n=e.label,o=e.value,c=e.placeholder,l=e.onChange;return r.a.createElement(f.g,{md:a,className:"form-group"},r.a.createElement("label",null,n),r.a.createElement(f.o,{placeholder:c,value:o,onChange:l}))}var st=function(){var e=Object(n.useState)(b.c.getSettings()),t=Object(O.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({}),s=Object(O.a)(c,2),i=s[0],u=s[1],m=Object(n.useState)(!1),d=Object(O.a)(m,2),p=d[0],g=d[1];function h(){var e=b.c.getSettings();o(e),u({})}function E(e,t){var a=Object(l.a)({},i);a[e]=t,u(a)}return Object(n.useEffect)((function(){return b.c.on("update-settings",h),function(){b.c.removeListener("update-settings",h)}}),[]),r.a.createElement(f.d,{small:!0,className:"mb-4"},r.a.createElement(f.f,{className:"border-bottom"},r.a.createElement("h6",{className:"m-0"},"Connection Preferences")),r.a.createElement(f.e,null,r.a.createElement(f.n,null,r.a.createElement(f.u,{form:!0},ot.map((function(e){var t=e.label,n=e.placeholder,o=e.value;return r.a.createElement(lt,{key:o,label:t,placeholder:n,value:o in i?i[o]:a[o],onChange:function(e){return E(o,e.target.value)}})}))),r.a.createElement(f.u,null,r.a.createElement(f.g,{xs:"6"},r.a.createElement("strong",{"aria-controls":"collapsed-form","aria-expanded":p,onClick:function(){g(!p)},className:"text-primary d-inline-block mb-3 cursor-pointer"},"Advanced"," ",r.a.createElement("i",{className:"material-icons"},p?"arrow_drop_up":"arrow_drop_down"))),r.a.createElement(f.g,{xs:"6",className:"text-right"},r.a.createElement(f.b,{onClick:function(){var e=Object(l.a)(Object(l.a)({},a),i);b.b.dispatch({actionType:b.a.SAVE_SETTINGS,payload:e})}},"Save Changes"))),r.a.createElement(Ce.a,{in:p},r.a.createElement("div",{id:"collapsed-form"},r.a.createElement("strong",{className:"text-muted d-block mb-3"},"Endpoints"),r.a.createElement(f.u,{form:!0},ct.map((function(e){var t=e.label,n=e.placeholder,o=e.value;return r.a.createElement(lt,{key:o,label:t,placeholder:n,value:o in i?i[o]:a[o],onChange:function(e){return E(o,e.target.value)}})}))))))))},it=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement(ee.a,{fluid:!0,className:"main-content-container px-4"},r.a.createElement(te.a,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(h.a,{title:"Settings",className:"text-sm-left mb-3"})),r.a.createElement(st,null))},e}return a}(r.a.Component),ut=a(123),mt=a(122),dt=a(119),pt=a(92),gt=[{path:"/",exact:!0,layout:c.b,component:function(){return r.a.createElement(o.a,{to:"/logs"})}},{path:"/logs",layout:c.b,component:function(){var e=r.a.useRef(!1),t=Object(n.useState)((function(){return b.c.getLogs()})),a=Object(O.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)((function(){return Qe()})),i=Object(O.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)((function(){return b.c.getLogLevelOccurences()})),p=Object(O.a)(d,2),g=p[0],f=p[1],E=Object(n.useState)((function(){return b.c.getLogLevelCharts(Ke[u])})),v=Object(O.a)(E,2),y=v[0],w=v[1],N=Object(n.useCallback)((function(){var e=b.c.getLogLevelCharts(Ke[u]);w(Object(l.a)({},e))}),[u]);function x(){e.current&&(e.current=!1,function(){var e=b.c.getLogs(),t=b.c.getLogLevelOccurences();c(Object(Z.a)(e)),f(Object(l.a)({},t))}())}function k(){e.current=!0}Object(n.useEffect)((function(){return b.c.on("update-logs",k),qe=setInterval(x,20),Ye=setInterval(N,1e3),function(){b.c.removeListener("update-logs",k),clearInterval(qe),clearInterval(Ye)}}),[N]),Object(n.useEffect)((function(){N()}),[N]);var C=$e[u];return r.a.createElement(ee.a,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement(te.a,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(h.a,{title:"Log Stream",className:"text-sm-left mb-3"})),r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:"10",className:"mb-4"},r.a.createElement(me,{data:y,showLog:function(e){var t=y.data,a=e[0]&&e[0]._index;a&&"undefined"!==typeof a&&function(e){b.b.dispatch({actionType:b.a.SHOW_LOG_AT_INDEX,payload:e})}(t[a].lastLog)},setTimeSelection:function(e){var t;m(e),t=e,localStorage.setItem(ze,t)},timeOptions:$e,selectedTime:u,timeLabels:C.chartLabels})),r.a.createElement(ae.a,{md:"2",className:"mb-4"},r.a.createElement(pe,{data:g}))),r.a.createElement(Ve,{data:o,showLogDetails:Xe})))},props:{usesConnection:!0,usesAuth:!1}},{path:"/flow",layout:c.b,component:X,props:{usesConnection:!0,usesAuth:!1}},{path:"/task",layout:c.b,component:rt,props:{usesConnection:!0,usesAuth:!1}},{path:"/settings",layout:c.b,component:it,props:{usesConnection:!0,usesAuth:!1}},{path:"/help",layout:c.b,component:pt.a,props:{usesConnection:!1,usesAuth:!1}},{path:"/home",layout:c.b,component:pt.a,props:{usesConnection:!1,usesAuth:!1}},{path:"/hub",layout:c.b,component:ut.a,props:{usesConnection:!1,usesAuth:!0}},{path:"/package",layout:c.b,component:mt.a,props:{usesConnection:!1,usesAuth:!0}},{path:"/login",layout:c.b,component:dt.a,props:{usesConnection:!1,usesAuth:!0}}]},595:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(618),s=a(120),i="#009999",u="#FFCC66",m={palette:{background:{default:"#FFFFFF"},primary:i,secondary:u,warning:u,error:"#ff6666",success:"#32C8CD",info:i,critical:"#ff4540",debug:"#7E7278"}},d=(a(166),a(167),a(168),a(72)),p=a(60),g=a(12),f=a(14),b=a(32),h=a.n(b),E=a(100),v=a(20),y=a(35),w=a(78);var N={selectedFlow:"_userFlow",flows:Object(g.a)(Object(g.a)({},function(){var e=localStorage.getItem("userFlows"),t=e?JSON.parse(e):null;return h.a.isEmpty(t)?{_userFlow:{name:"Custom Flow 1",type:"user-generated",flow:y.f}}:t}()),function(){var e={};return Object.entries(E.a).forEach((function(t){var a,n=Object(f.a)(t,2),r=n[0],o=n[1],c=Object(v.f)(o.yaml);try{a=c.data.with.board.canvas}catch(s){a={}}var l=Object(v.d)(c.data.pods,a);e[r]=Object(g.a)(Object(g.a)({},o),{},{flow:l})})),e}())};function O(e,t){var a=Object(g.a)(Object(g.a)({},e),{},{flows:h.a.omit(e.flows,t)}),n=Object.entries(e.flows).filter((function(e){var t=Object(f.a)(e,2);t[0];return"example"!==t[1].type}));if(e.selectedFlow===t&&n.length){var r=n[0][0];a.selectedFlow=r}else n.length||(a={flows:Object(g.a)({_userFlow:{name:"Custom Flow 1",type:"user-generated",flow:y.f}},a.flows),selectedFlow:"_userFlow"});return a}function x(e,t){var a="Custom Flow",n=Object.values(e.flows).filter((function(e){return e.name.startsWith(a)})).map((function(e){return parseInt(e.name.substring(a.length))||0})).sort((function(e,t){return e-t})),r=n[n.length-1]||0,o=Object(w.a)(),c=y.f;if(t){var l,s=Object(v.f)(t);try{l=s.data.with.board.canvas}catch(i){l={}}c=Object(v.d)(s.data.pods,l)}return{flows:Object(g.a)(Object(g.a)({},e.flows),{},Object(p.a)({},o,{name:"".concat(a," ").concat(r+1),type:"user-generated",flow:c})),selectedFlow:o}}function k(e,t){return e.selectedFlow?{selectedFlow:e.selectedFlow,flows:Object(g.a)(Object(g.a)({},e.flows),{},Object(p.a)({},e.selectedFlow,Object(g.a)(Object(g.a)({},e.flows[e.selectedFlow]),{},{flow:t})))}:e}function C(e,t){return Object(g.a)(Object(g.a)({},e),{},{selectedFlow:t})}var j,_=a(205),S=Object(d.combineReducers)({flowState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.b:return O(e,t.payload);case y.c:return x(e,t.payload);case y.e:return k(e,t.payload);case y.a:return x(e);case y.d:return C(e,t.payload);default:return e}}}),L=Object(d.createStore)(S,Object(_.composeWithDevTools)());j=a(596).Hub,c.a.render(r.a.createElement(l.a,{theme:m},r.a.createElement(s.a,{store:L},r.a.createElement(j,null))),document.getElementById("root"))},596:function(e,t,a){"use strict";a.r(t),a.d(t,"Hub",(function(){return O}));var n=a(0),r=a.n(n),o=a(42),c=a(23),l=(a(592).dashboardRoutes,a(591).hubRoutes),s=a(26),i=a(111),u=a(28),m=a(27),d=a(12),p=a(129);p.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TARGET:"hub"}).REACT_APP_GAID||"UA-164627626-1");var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e){p.a.set(Object(d.a)({page:e},t)),p.a.pageview(e)},n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TARGET:"hub"}).REACT_APP_BASENAME||"",o=function(t){Object(u.a)(c,t);var o=Object(m.a)(c);function c(){return Object(s.a)(this,c),o.apply(this,arguments)}return Object(i.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname+this.props.location.search;a("".concat(n).concat(e))}},{key:"componentDidUpdate",value:function(e){var t=e.location.pathname+e.location.search,r=this.props.location.pathname+this.props.location.search;t!==r&&a("".concat(n).concat(r))}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),c}(r.a.Component);return o},f=(a(166),a(167),a(168),a(223)),b=a(615),h=a(611),E=a(162),v=a(34),y=a(4);function w(e){var t=e.error,a=e.resetErrorBoundary;return r.a.createElement(b.a,{fluid:!0,className:"main-content-container p-5"},r.a.createElement(h.a,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(v.a,{title:"Error",subtitle:"This should not have happened",className:"text-sm-left my-3"})),r.a.createElement(h.a,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(E.a,{xs:"12",sm:"3"},r.a.createElement("p",null,"Something went wrong:"),r.a.createElement("pre",null,r.a.createElement("code",{className:"text-warning"},t.message)))),r.a.createElement(h.a,{noGutters:!0,className:"page-header"},r.a.createElement(E.a,null,r.a.createElement(y.b,{onClick:a},"Try again"))))}var N=a(5),O=function(){return document.title="Jina Hub",r.a.createElement(o.a,{basename:"/"},r.a.createElement("div",null,l.map((function(e,t){return r.a.createElement(c.b,{key:t,path:e.path,exact:e.exact,component:g((function(t){return r.a.createElement(e.layout,Object.assign({},t,e.props),r.a.createElement(f.ErrorBoundary,{FallbackComponent:w,onReset:function(){return N.c.init()}},r.a.createElement(e.component,t)))}))})}))))}},598:function(e,t,a){"use strict";a.r(t),a.d(t,"Store",(function(){return D}));var n,r,o=a(16),c=a.n(o),l=a(22),s=a(39),i=a(26),u=a(111),m=a(28),d=a(27),p=a(12),g=a(14),f=a(212),b=a(32),h=a.n(b),E=a(78),v=a(5),y=a(20),w=a(163),N=a.n(w),O=a(17),x=a(69),k=N.a.create({baseURL:x.a,withCredentials:!0,timeout:x.b,headers:{"Content-Type":"application/json",Accept:"application/json"}}),C={connect:function(e,t,a,o){O.a.log("api - connect - settings",e);var c="".concat(e.host,":").concat(e.port).concat(e.log.startsWith("/")?e.log:"/"+e.log);O.a.log("api - connect - logString",c),n&&n.close(),(n=new EventSource(c)).onopen=function(){O.a.log("api - logStream.onopen called"),t("connected","Logserver connection established at ".concat(e.host,":").concat(e.port))},n.onmessage=function(e){a({type:"log",data:JSON.parse(e.data)})},n.onerror=function(a){O.a.log("api - logStream.onerror - ERROR",a),t("failed","Could not connect to logserver at ".concat(e.host,":").concat(e.port)),n.close()};var l="".concat(e.host,":").concat(e.port).concat(e.profile.startsWith("/")?e.profile:"/"+e.profile);O.a.log("api - connect - taskString",l),r&&r.close(),(r=new EventSource(l)).onopen=function(){O.a.log("api - taskStream.onopen called"),o({type:"connect",data:"Task connection established at ".concat(l)})},r.onmessage=function(e){o({type:"event",data:JSON.parse(e.data)})},r.onerror=function(e){O.a.log("api - taskStream.onerror - ERROR",e),o({type:"error",data:"Could not get profile data from ".concat(l)}),r.close()}},getProfile:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("profile");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getYAML:function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t.host,":").concat(t.port).concat(t.yaml.startsWith("/")?t.yaml:"/"+t.yaml),O.a.log("api - getYAML - connectionString",a),e.next=4,N.a.get(a,{timeout:x.b});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getImages:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("list");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getImage:function(){var e=Object(l.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/images/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postRating:function(){var e=Object(l.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/images/".concat(t,"/ratings"),{stars:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),postReview:function(){var e=Object(l.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/images/".concat(t,"/reviews"),{content:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),searchHub:function(){var e=Object(l.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("/images?category=".concat(t,"&q=").concat(a,"&sort=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("/auth/logout");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},j=a(142),_=a(100);function S(){var e={};return Object.entries(_.a).forEach((function(t){var a,n=Object(g.a)(t,2),r=n[0],o=n[1],c=Object(y.f)(o.yaml);try{a=c.data.with.board.canvas}catch(s){a={}}var l=Object(y.d)(c.data.pods,a);e[r]=Object(p.a)(Object(p.a)({},o),{},{flow:l})})),e}function L(){var e=localStorage.getItem("userFlows"),t=e?JSON.parse(e):null;return h.a.isEmpty(t)?{_userFlow:{name:"Custom Flow 1",type:"user-generated",flow:{selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}}}}:t}function A(){return{settings:{host:localStorage.getItem("preferences-host")||"http://localhost",port:localStorage.getItem("preferences-port")||5e3,log:localStorage.getItem("preferences-log")||"/stream/log",profile:localStorage.getItem("preferences-profile")||"/stream/profile",yaml:localStorage.getItem("preferences-yaml")||"/data/yaml",shutdown:localStorage.getItem("preferences-shutdown")||"/action/shutdown",ready:localStorage.getItem("preferences-ready")||"/status/ready"},images:{},hub:[],banner:!1,connected:!1,loading:!0,modal:!1,menuVisible:!1,navItems:[{items:[{title:"Home",to:"/home",iconName:"home",matches:["home"]},{title:"Log Stream",to:"/logs",iconName:"insert_comment",matches:["logs"]},{title:"Task",to:"/task",iconName:"assessment",matches:["task"]},{title:"Flow Design",to:"/flow",iconName:"device_hub",matches:["flow"]},{title:"Hub",to:"/hub",iconName:"store",matches:["hub","package"]},{title:"Settings",to:"/settings",iconName:"settings",matches:["settings"]},{title:"Help",to:"/help",iconName:"help",matches:["help"]}]}],flows:Object(p.a)(Object(p.a)({},L()),S()),selectedFlow:"_userFlow",logs:[],logSources:{},logLevels:{},logLevelOccurences:{},logIndex:!1,summaryCharts:{},processes:{},taskData:{qps:{current:0,history:new Array(30).fill(0)},elapsed:{task_name:"No Current Task",seconds:"0s"},progress:{currentRequest:0,bar_len:0,num_bars:0},speed:{current:0,unit:"units",history:new Array(30).fill(0)},lastUpdateChart:new Date,messages:[],bytes:[]},selectedNode:null,modalParams:{},currentTab:"logStream"}}var T,F,I=A();"localhost"===window.location.hostname&&O.a.enable();var D=new(function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).registerActions=function(t){var a,n=t.actionType,r=t.payload;switch(n){case v.a.TOGGLE_SIDEBAR:e.toggleSidebar();break;case v.a.SHOW_MODAL:e.showModal(r);break;case v.a.SHOW_BANNER:(a=e).showBanner.apply(a,Object(s.a)(r));break;case v.a.IMPORT_CUSTOM_YAML:e.importCustomYAML(r);break;case v.a.CLOSE_MODAL:e.closeModal();break;case v.a.SHOW_LOG_AT_INDEX:e.showLogAtIndex(r);break;case v.a.SAVE_SETTINGS:e.saveSettings(r);break;case v.a.RECONNECT:e.reconnect();break;case v.a.POST_RATING:e.postRating(r);break;case v.a.POST_REVIEW:e.postReview(r);break;case v.a.SEARCH_HUB:e.searchHub(r);break;case v.a.LOG_OUT:e.logOut();break;case v.a.LOAD_FLOW:e.loadFlow(r);break;case v.a.SHOW_POD_IN_FLOW:e.showPodByLabel(r);break;case v.a.CREATE_NEW_FLOW:e.createNewFlow();break;case v.a.DUPLICATE_FLOW:e.createNewFlow(r);break;case v.a.UPDATE_FLOW:e.updateFlow(r);break;case v.a.DELETE_FLOW:e.deleteFlow(r)}},e.init=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.clearIntervals(),I=A(),t.next=4,e.initFlowChart();case 4:e.initLogStream(),e.initHub(),e.initUser(),e.emit("update-ui"),e.emit("update-settings");case 9:case"end":return t.stop()}}),t)}))),e.clearIntervals=function(){T&&clearInterval(T)},e.initFlowChart=Object(l.a)(c.a.mark((function t(){var a,n,r,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.getYAML(I.settings);case 3:n=t.sent,a=Object(y.f)(n),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),O.a.log("initFlowChart - parseYAML[API] ERROR",t.t0),t.abrupt("return");case 11:try{r=a.data.with.board.canvas}catch(c){r={}}O.a.log("initFlowChart - flow",a),O.a.log("initFlowChart - canvas",r),(o=Object(y.d)(a.data.pods,r)).with=a.data.with,O.a.log("initFlowChart - parsed",o),(l={}).connectedFlow={flow:o,name:"Network Flow",type:"remote"},I.flows=Object(p.a)(Object(p.a)({},l),I.flows),I.selectedFlow="connectedFlow",e.emit("update-ui"),e.emit("update-flowchart");case 23:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.initLogStream=function(){C.connect(I.settings,e.handleLogConnectionStatus,e.handleNewLog,e.handleNewTaskEvent),T=setInterval((function(){return e.emit("update-task")}),500)},e.handleLogConnectionStatus=function(t,a){if(O.a.log("handleLogConnectionStatus - status",t),O.a.log("handleLogConnectionStatus - message",a),I.loading=!1,"connected"===t)return I.connected=!0,e.showBanner(a,"success");I.connected=!1,e.emit("update-ui")},e.handleNewLog=function(t){var a=t.data,n=Object(v.d)(a,I.logs.length),r=n.process,o=n.name,c=n.levelname,l=n.unixTime;I.logs.push(n),I.processes[r]=n.name,I.logSources[o]?I.logSources[o]++:I.logSources[o]=1,I.logLevels[c]?I.logLevels[c]++:I.logLevels[c]=1,I.logLevelOccurences[l]||(I.logLevelOccurences[l]={lastLog:0,levels:{INFO:0,SUCCESS:0,WARNING:0,ERROR:0,CRITICAL:0,DEBUG:0}}),I.logLevelOccurences[l].levels[c]++,I.logLevelOccurences[l].lastLog=n.idx,e.emit("update-logs")},e.handleNewTaskEvent=function(e){var t=e.data,a=t.task_name,n=t.process,r=t.bar_len,o=t.num_bars,c=t.elapsed,l=t.speed,s=t.speed_unit,i=t.bytes_recv,u=t.bytes_sent,m=t.msg_recv,d=t.msg_sent,p=t.num_reqs,g=t.qps;if(r&&o&&(I.taskData.progress.currentRequest=p,I.taskData.progress.bar_len=r,I.taskData.progress.num_bars=o),m&&d){var f=I.taskData.messages.map((function(e){return e.process})).indexOf(n),b={process:n,sent:d,received:m,node:I.processes[n]},h={process:n,sent:u,received:i,node:I.processes[n]};f<0?(I.taskData.messages.push(b),I.taskData.bytes.push(h)):(I.taskData.messages[f]=b,I.taskData.bytes[f]=h),I.taskData.messages=I.taskData.messages.sort((function(e,t){return t.sent+t.received-(e.sent+e.received)})).slice(0,20),I.taskData.bytes=I.taskData.bytes.sort((function(e,t){return t.sent+t.received-(e.sent+e.received)})).slice(0,20),I.taskData.lastUpdateChart=new Date}g&&(I.taskData.qps.current=parseFloat(g).toFixed(1),I.taskData.qps.history.push(parseFloat(g).toFixed(3)),I.taskData.qps.history.shift()),l&&s&&(I.taskData.speed.unit=s,I.taskData.speed.current=parseFloat(l).toFixed(1),I.taskData.speed.history.push(parseFloat(l).toFixed(3)),I.taskData.speed.history.shift()),c&&(I.taskData.elapsed.seconds=Object(y.e)(parseInt(c)),I.taskData.elapsed.task_name="Task: ".concat(a))},e.initHub=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.getImages();case 3:a=t.sent,I.hub=a,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),I.hub=!1;case 10:e.emit("update-hub");case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.initUser=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getProfile();case 2:a=t.sent,I.user=a,e.emit("update-user");case 5:case"end":return t.stop()}}),t)}))),e.showLogAtIndex=function(t){t&&I.logs[t]&&(I.logIndex=t,e.emit("show-log"))},e.showPodByLabel=function(t){var a={},n=0,r=0;Object.entries(I.flowchart.nodes).forEach((function(e){var o=Object(g.a)(e,2),c=o[0],l=o[1];l.label===t&&(a.id=c,a.type="node",n=-1*l.position.x+40,r=-1*l.position.y+100)})),I.flowchart.selected=a,I.flowchart.offset={x:n,y:r},e.emit("update-flowchart"),window.location.hash="#/flow"},e.importCustomYAML=function(t){O.a.log("importCustomYAML - customYAML",t),e.createNewFlow(t),e.closeModal(),e.emit("update-flowchart")},e.loadFlow=function(t){I.selectedFlow=t,e.emit("update-flowchart")},e.updateFlow=function(t){I.flows[I.selectedFlow].flow=t,e.saveFlowsToStorage(),e.emit("update-flowchart")},e.createNewFlow=function(t){var a,n="Custom Flow",r=Object.values(I.flows).filter((function(e){return e.name.startsWith(n)})).map((function(e){return parseInt(e.name.substring(n.length))||0})).sort((function(e,t){return e-t})),o=r[r.length-1]||0,c=Object(E.a)();if(t){var l,s=Object(y.f)(t);try{l=s.data.with.board.canvas}catch(i){l={}}a=Object(y.d)(s.data.pods,l)}else a={selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}};I.flows[c]={name:"".concat(n," ").concat(o+1),type:"user-generated",flow:a},I.selectedFlow=c,e.saveFlowsToStorage(),e.emit("update-flowchart")},e.deleteFlow=function(t){I.flows=h.a.omit(I.flows,t);var a=Object.entries(I.flows).filter((function(e){var t=Object(g.a)(e,2);t[0];return"example"!==t[1].type}));I.selectedFlow===t&&a.length?I.selectedFlow=a[0][0]:a.length||(I.flows=Object(p.a)({_userFlow:{name:"Custom Flow 1",type:"user-generated",flow:{selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}}}},I.flows),I.selectedFlow="_userFlow"),e.saveFlowsToStorage(),e.emit("update-flowchart")},e.saveFlowsToStorage=function(){var e={},t=I.flows;Object.entries(t).forEach((function(t){var a=Object(g.a)(t,2),n=a[0],r=a[1];"user-generated"===r.type&&(e[n]=r)})),localStorage.setItem("userFlows",JSON.stringify(e))},e.saveSettings=function(t){O.a.log("saveSettings - settings",t),Object.keys(t).forEach((function(e){localStorage.setItem("preferences-".concat(e),t[e])})),setTimeout(e.init,100)},e.postRating=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,r,o,l,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.imageId,r=a.stars,I.user){t.next=3;break}return t.abrupt("return",window.location.hash="#/login");case 3:return t.prev=3,t.next=6,C.postRating(n,r);case 6:o=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),l=String(t.t0).includes("409")?"Already Rated":t.t0,t.abrupt("return",e.showError(l));case 13:o.error?e.showError(o.error):o.data&&(s=o.data,I.images[s.id]=s,e.showBanner("Rating successfully posted","success")),e.emit("update-hub");case 15:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.postReview=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,r,o,l,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.imageId,r=a.content,I.user){t.next=4;break}return e.closeModal(),t.abrupt("return",window.location.hash="#/login");case 4:return e.closeModal(),t.prev=5,t.next=8,C.postReview(n,r);case 8:o=t.sent,t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(5),l=String(t.t0).includes("409")?"Already Reviewed":t.t0,t.abrupt("return",e.showError(l));case 15:o.error?e.showError(o.error):o.data&&(s=o.data,I.images[s.id]=s,e.showBanner("Review successfully posted","success")),e.emit("update-hub");case 17:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}(),e.logOut=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.logOut();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),e.searchHub=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,r,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.category,r=a.q,o=a.sort,t.next=3,C.searchHub(n,r,o);case 3:l=t.sent,I.hub=l,e.emit("update-hub");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showBanner=function(t,a){F&&clearTimeout(F),I.banner={message:String(t),theme:a},F=setTimeout(e.hideBanner,5e3),e.emit("update-ui")},e.hideBanner=function(){I.banner=!1,e.emit("update-ui")},e.showError=function(t){e.showBanner(t,"error")},e.showModal=function(t){var a=t.modal,n=t.modalParams;I.modal=a,I.modalParams=n||{},e.emit("update-ui")},e.closeModal=function(){I.modal=!1,I.modalParams={},e.emit("update-ui")},e.getCurrentTab=function(){return I.currentTab},e.getUser=function(){return I.user},e.getHubImages=function(){return I.hub},e.getHubImage=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I.images[t]){e.next=4;break}return e.next=3,C.getImage(t);case 3:I.images[t]=e.sent;case 4:return e.abrupt("return",I.images[t]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getSettings=function(){return I.settings},e.getBanner=function(){return I.banner},e.getModal=function(){return I.modal},e.getModalParams=function(){return I.modalParams},e.getLogs=function(){return I.logs},e.getLogSources=function(){return I.logSources},e.getLogLevels=function(){return I.logLevels},e.getSummaryCharts=function(){return I.summaryCharts},e.getLogLevelCharts=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t={lastLog:0,levels:{INFO:0,SUCCESS:0,WARNING:0,ERROR:0,CRITICAL:0,DEBUG:0}},a=e/60,n=[],r=Math.ceil(+new Date/1e3/a)*a,o=Math.floor(+new Date/1e3),c=function(e){for(var r=h.a.cloneDeep(t),o=e;o<e+a;++o){var c=I.logLevelOccurences[o];c&&(r.lastLog=c.lastLog,Object.entries(c.levels).forEach((function(e){var t=e[0],a=e[1];r.levels[t]=r.levels[t]+a})))}n.push(r)},l=r-e;l<r;l+=a)c(l);return{data:n,numSeconds:e,numTicks:60,lastTimestamp:o}},e.getLogLevelOccurences=function(){return I.logLevels},e.getTaskData=function(){return I.taskData},e.getActivePanel=function(){var e=window.location.hash.substring(2,window.location.hash.length);return e.startsWith("flow")?"flow":e.startsWith("logs")?"logs":e.startsWith("hub")||e.startsWith("package")?"hub":e.startsWith("task")?"task":"neither"},e.getConnectionStatus=function(){return I.connected},e.isLoading=function(){return I.loading},e.getFlowchart=function(){return I.flows[I.selectedFlow]},e.getFlows=function(){return I.flows},e.getSelectedFlowId=function(){return I.selectedFlow},e.getAvailableProperties=function(){return j},e.getIndexedLog=function(){return I.logIndex},e.getStoreCopy=function(){return h.a.cloneDeep(I)},v.b.register(e.registerActions),e.init(),window.peakLogs=e.getLogs,window.peakStore=function(){return console.log(I)},e}return Object(u.a)(a,[{key:"reconnect",value:function(){this.init()}},{key:"toggleSidebar",value:function(){I.menuVisible=!I.menuVisible,this.emit("update-ui")}},{key:"getMenuState",value:function(){return I.menuVisible}},{key:"getSidebarItems",value:function(){return I.navItems}}]),a}(f.EventEmitter))},69:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=15e3,r="https://hubapi.jina.ai"},92:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(4),c=a(621),l=a(611),s=a(162);function i(e){var t=e.title,a=e.content,n=e.icon,o=e.theme,i=e.link;return r.a.createElement("a",{className:"unstyled-link",href:i,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(c.a,{className:"h-100"},r.a.createElement(c.a.Body,{className:"pt-3"},r.a.createElement(l.a,{className:"align-items-center"},r.a.createElement(s.a,{xs:"8"},r.a.createElement("h4",null,t)),r.a.createElement(s.a,{xs:"4"},r.a.createElement("h1",{className:"float-right"},r.a.createElement("span",{className:"".concat(n," log-").concat(o)})))),r.a.createElement(l.a,null,r.a.createElement(s.a,null,a)))))}var u=a(34);t.a=function(){return r.a.createElement(o.i,{fluid:!0,className:"main-content-container px-4"},r.a.createElement(o.u,{noGutters:!0,className:"page-header mb-4"},r.a.createElement(u.a,{title:"Resources",className:"text-sm-left mb-3"})),r.a.createElement(o.u,null,r.a.createElement(o.g,{md:"4",lg:"3",className:"mb-4"},r.a.createElement(i,{title:"Jina 101",content:"Understanding all key concepts of Jina in 3 minutes!",link:"https://101.jina.ai",icon:"fas fa-egg",theme:"warning"})),r.a.createElement(o.g,{md:"4",lg:"3",className:"mb-4"},r.a.createElement(i,{title:"Jina Docs",content:"The best way to learn Jina in depth.",link:"https://docs.jina.ai",icon:"fas fa-book",theme:"primary"})),r.a.createElement(o.g,{md:"4",lg:"3",className:"mb-4"},r.a.createElement(i,{title:'Jina "Hello World"',content:"A simple demo of image neural search for Fashion-MNIST.",link:"https://github.com/jina-ai/jina#jina-hello-world-",icon:"fas fa-globe-europe",theme:"error"})),r.a.createElement(o.g,{md:"4",lg:"3",className:"mb-4"},r.a.createElement(i,{title:r.a.createElement("span",null,"Visit us on ",r.a.createElement("span",{className:"text-nowrap"},"Github!")),content:"Explore more exciting open-source projects from us.",link:"https://opensource.jina.ai",icon:"fab fa-github",theme:"info"})),r.a.createElement(o.g,{md:"4",lg:"3",className:"mb-4"},r.a.createElement(i,{title:"We are hiring!",content:"Join us and build the next neural search eco system!",link:"https://www.linkedin.com/company/jinaai/jobs/",icon:"fab fa-linkedin",theme:"linkedin"}))))}}},[[595,1,2]]]);
//# sourceMappingURL=main.c0420fce.chunk.js.map